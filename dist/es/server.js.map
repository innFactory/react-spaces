{"version":3,"file":"server.js","sources":["../../src/core-types.ts","../../src/core-utils.ts","../../src/core-resizing.ts","../../src/core-dragging.ts","../../src/core.ts","../../src/core-react.ts","../../src/components/Centered.tsx","../../src/components/CenteredVertically.tsx","../../src/components/Space.tsx","../../src/components/Anchored.tsx","../../src/components/Custom.tsx","../../src/components/Fill.tsx","../../src/components/Fixed.tsx","../../src/components/Layer.tsx","../../src/components/Positioned.tsx","../../src/components/SpaceInfo.tsx","../../src/components/ViewPort.tsx","../../src/components/SSR.tsx","../../src/components/Options.tsx"],"sourcesContent":["export type ResizeMouseEvent = React.MouseEvent<HTMLElement, MouseEvent>;\r\nexport type ResizeTouchEvent = React.TouchEvent<HTMLElement>;\r\nexport type OnResizeStart = ((resizeType?: ResizeType) => void | boolean) | undefined;\r\nexport type OnResizeEnd = ((newSize: SizeUnit, domRect: DOMRect, resizeType?: ResizeType) => void) | undefined;\r\nexport type OnDragEnd = (position: IPosition, moved: boolean) => void;\r\n\r\nexport enum Type {\r\n\tViewPort = \"viewport\",\r\n\tFixed = \"fixed\",\r\n\tFill = \"fill\",\r\n\tPositioned = \"positioned\",\r\n\tAnchored = \"anchored\",\r\n\tCustom = \"custom\",\r\n}\r\n\r\nexport enum AnchorType {\r\n\tLeft = \"anchor-left\",\r\n\tRight = \"anchor-right\",\r\n\tTop = \"anchor-top\",\r\n\tBottom = \"anchor-bottom\",\r\n}\r\n\r\nexport enum Orientation {\r\n\tHorizontal,\r\n\tVertical,\r\n}\r\n\r\nexport type SizeUnit = number | string | undefined;\r\n\r\nexport enum ResizeType {\r\n\tAll = \"resize-all\",\r\n\tLeft = \"resize-left\",\r\n\tRight = \"resize-right\",\r\n\tTop = \"resize-top\",\r\n\tBottom = \"resize-bottom\",\r\n\tTopLeft = \"resize-topleft\",\r\n\tTopRight = \"resize-topright\",\r\n\tBottomLeft = \"resize-bottomleft\",\r\n\tBottomRight = \"resize-bottomright\",\r\n}\r\n\r\nexport enum ResizeHandlePlacement {\r\n\tOverlayInside = \"overlay-inside\",\r\n\tInside = \"inside\",\r\n\tOverlayBoundary = \"overlay-boundary\",\r\n}\r\n\r\nexport enum CenterType {\r\n\tNone = \"none\",\r\n\tVertical = \"vertical\",\r\n\tHorizontalVertical = \"horizontalVertical\",\r\n}\r\n\r\nexport enum MoveEvent {\r\n\tMouse = \"mousemove\",\r\n\tTouch = \"touchmove\",\r\n}\r\n\r\nexport enum EndEvent {\r\n\tMouse = \"mouseup\",\r\n\tTouch = \"touchend\",\r\n}\r\n\r\nexport interface ICommonProps {\r\n\tid?: string;\r\n\tclassName?: string;\r\n\tcenterContent?: CenterType;\r\n\tzIndex?: number;\r\n\tscrollable?: boolean;\r\n\ttrackSize?: boolean;\r\n\tallowOverflow?: boolean;\r\n}\r\n\r\nexport interface ISpaceProps extends ICommonProps {\r\n\ttype: Type;\r\n\tanchor?: AnchorType | undefined;\r\n\torder?: number | undefined;\r\n\tposition?: IPositionalProps | undefined;\r\n\thandleSize?: number | undefined;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\ttouchHandleSize?: number | undefined;\r\n\tminimumSize?: number | undefined;\r\n\tmaximumSize?: number | undefined;\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n}\r\n\r\nexport interface ISpaceStore {\r\n\tgetSpaces: () => ISpaceDefinition[];\r\n\tgetSpace: (id: string) => ISpaceDefinition | undefined;\r\n\taddSpace: (space: ISpaceDefinition) => void;\r\n\tupdateSpace: (space: ISpaceDefinition, props: ISpaceProps) => void;\r\n\tupdateStyles: (space: ISpaceDefinition) => void;\r\n\tremoveSpace: (space: ISpaceDefinition) => void;\r\n\tcreateSpace: (parent: string | undefined, props: ISpaceProps, update: () => void) => ISpaceDefinition;\r\n\tstartMouseResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.MouseEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartTouchResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.TouchEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartMouseDrag: (space: ISpaceDefinition, event: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (space: ISpaceDefinition, event: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n}\r\n\r\nexport interface IPosition {\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n}\r\n\r\nexport interface IPositionalProps extends IPosition {\r\n\tleftResizable?: boolean;\r\n\ttopResizable?: boolean;\r\n\trightResizable?: boolean;\r\n\tbottomResizable?: boolean;\r\n\ttopLeftResizable?: boolean;\r\n\ttopRightResizable?: boolean;\r\n\tbottomLeftResizable?: boolean;\r\n\tbottomRightResizable?: boolean;\r\n}\r\n\r\nexport interface ISize {\r\n\tsize: SizeUnit;\r\n\tadjusted: SizeUnit[];\r\n\tresized: number;\r\n}\r\n\r\nexport interface ISpaceDefinition {\r\n\tupdate: () => void;\r\n\tupdateParent: () => void;\r\n\tadjustLeft: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustRight: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustTop: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustBottom: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustEdge: (adjusted: SizeUnit[]) => boolean;\r\n\tanchoredChildren: (children: ISpaceDefinition[], anchor: AnchorType, zIndex: number) => ISpaceDefinition[];\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n\telement: HTMLElement;\r\n\tid: string;\r\n\ttype: Type;\r\n\tanchor?: AnchorType;\r\n\torientation: Orientation;\r\n\tscrollable: boolean;\r\n\torder?: number;\r\n\tposition: \"fixed\" | \"absolute\" | \"relative\";\r\n\tchildren: ISpaceDefinition[];\r\n\tparentId: string | undefined;\r\n\tstore: ISpaceStore;\r\n\tleft: ISize;\r\n\ttop: ISize;\r\n\tright: ISize;\r\n\tbottom: ISize;\r\n\twidth: ISize;\r\n\theight: ISize;\r\n\tzIndex: number;\r\n\tdimension: DOMRect;\r\n\tcenterContent: \"none\" | \"vertical\" | \"horizontalVertical\";\r\n\tresizing: boolean;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\thandleSize: number;\r\n\ttouchHandleSize: number;\r\n\thandlePlacement: ResizeHandlePlacement;\r\n\tcanResizeTop: boolean;\r\n\tcanResizeLeft: boolean;\r\n\tcanResizeRight: boolean;\r\n\tcanResizeBottom: boolean;\r\n\tcanResizeTopLeft: boolean;\r\n\tcanResizeTopRight: boolean;\r\n\tcanResizeBottomLeft: boolean;\r\n\tcanResizeBottomRight: boolean;\r\n\tallowOverflow: boolean;\r\n\tssrStyle: string;\r\n}\r\n\r\nexport interface ISpaceContext {\r\n\tsize: DOMRect;\r\n\tlayer: number;\r\n\tstartMouseDrag: (e: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (e: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n\tforceUpdate: () => void;\r\n\tssrStyle?: string;\r\n}\r\n","import { ISpaceDefinition, SizeUnit, ISize, ResizeHandlePlacement, Type, Orientation } from \"./core-types\";\r\n\r\nexport function omit<K extends string, T extends Record<K, unknown>>(object: T, ...keys: K[]): Omit<T, K> {\r\n\tconst keySet = Object.create(null) as Record<K, true>;\r\n\tkeys.forEach((key) => {\r\n\t\tkeySet[key] = true;\r\n\t});\r\n\r\n\tconst result = Object.create(null) as Omit<T, K>;\r\n\tObject.keys(object).forEach((key) => {\r\n\t\tif (!keySet[key]) {\r\n\t\t\tresult[key] = object[key];\r\n\t\t}\r\n\t});\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function shortuuid() {\r\n\tlet firstPart = (Math.random() * 46656) | 0;\r\n\tlet secondPart = (Math.random() * 46656) | 0;\r\n\treturn (\"000\" + firstPart.toString(36)).slice(-3) + (\"000\" + secondPart.toString(36)).slice(-3);\r\n}\r\n\r\nexport function getSizeString(size: SizeUnit) {\r\n\treturn typeof size === \"string\" ? size : `${size}px`;\r\n}\r\n\r\nexport function css(size: ISize, dontAddCalc?: boolean) {\r\n\tif (size.size === 0 && size.adjusted.length === 0 && size.resized === 0) {\r\n\t\treturn `0px`;\r\n\t}\r\n\r\n\tconst parts: string[] = [];\r\n\tif (size.size !== undefined) {\r\n\t\tparts.push(getSizeString(size.size));\r\n\t}\r\n\r\n\tsize.adjusted.forEach((l) => parts.push(getSizeString(l)));\r\n\r\n\tif (size.resized !== 0) {\r\n\t\tparts.push(getSizeString(size.resized));\r\n\t}\r\n\r\n\tif (parts.length === 0) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tif (parts.length === 1) {\r\n\t\treturn parts[0];\r\n\t}\r\n\r\n\tif (dontAddCalc) {\r\n\t\treturn parts.join(\" + \");\r\n\t}\r\n\r\n\treturn `calc(${parts.join(\" + \")})`;\r\n}\r\n\r\nexport function coalesce<T>(...args: T[]) {\r\n\treturn args.find((x) => x !== null && x !== undefined);\r\n}\r\n\r\nexport function adjustmentsEqual(item1: SizeUnit[], item2: SizeUnit[]) {\r\n\tif (item1.length !== item2.length) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (var i = 0, len = item1.length; i < len; i++) {\r\n\t\tif (item1[i] !== item2[i]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function throttle<F extends (...args: any) => any>(callback: F, limit: number) {\r\n\tvar wait = false; // Initially, we're not waiting\r\n\treturn function(...args: any) {\r\n\t\t// We return a throttled function\r\n\t\tif (!wait) {\r\n\t\t\t// If we're not waiting\r\n\t\t\tcallback(...args); // Execute users function\r\n\t\t\twait = true; // Prevent future invocations\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t// After a period of time\r\n\t\t\t\twait = false; // And allow future invocations\r\n\t\t\t}, limit);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function styleDefinition(space: ISpaceDefinition) {\r\n\tconst cssElements: string[] = [];\r\n\r\n\tconst style: React.CSSProperties = {\r\n\t\tposition: space.position,\r\n\t\tleft: css(space.left),\r\n\t\ttop: css(space.top),\r\n\t\tright: css(space.right),\r\n\t\tbottom: css(space.bottom),\r\n\t\twidth: css(space.width),\r\n\t\theight: css(space.height),\r\n\t\tzIndex: space.zIndex,\r\n\t};\r\n\r\n\tconst cssString: string[] = [];\r\n\r\n\tif (style.position) {\r\n\t\tcssString.push(`position: ${style.position};`);\r\n\t}\r\n\tif (style.left) {\r\n\t\tcssString.push(`left: ${style.left};`);\r\n\t}\r\n\tif (style.top) {\r\n\t\tcssString.push(`top: ${style.top};`);\r\n\t}\r\n\tif (style.right) {\r\n\t\tcssString.push(`right: ${style.right};`);\r\n\t}\r\n\tif (style.bottom) {\r\n\t\tcssString.push(`bottom: ${style.bottom};`);\r\n\t}\r\n\tif (style.width) {\r\n\t\tcssString.push(`width: ${style.width};`);\r\n\t}\r\n\tif (style.height) {\r\n\t\tcssString.push(`height: ${style.height};`);\r\n\t}\r\n\tif (style.zIndex) {\r\n\t\tcssString.push(`z-index: ${style.zIndex};`);\r\n\t}\r\n\tif (space.allowOverflow) {\r\n\t\tcssString.push(\"overflow: visible;\");\r\n\t}\r\n\r\n\tif (cssString.length > 0) {\r\n\t\tcssElements.push(`#${space.id} { ${cssString.join(\" \")} }`);\r\n\t}\r\n\r\n\tif (space.scrollable) {\r\n\t\tcssElements.push(`#${space.id} > .spaces-space-inner { overflow: auto; touch-action: auto; }`);\r\n\t}\r\n\r\n\tlet nhandleOffset = 0;\r\n\tconst handleSize = `${space.handleSize}px`;\r\n\tconst touchHandleSize = `-${space.touchHandleSize / 2 - space.handleSize / 2}px`;\r\n\tconst negativeTouchHandleSize = `${space.touchHandleSize / 2 - space.handleSize / 2}px`;\r\n\r\n\tswitch (space.handlePlacement) {\r\n\t\tcase ResizeHandlePlacement.Inside:\r\n\t\tcase ResizeHandlePlacement.OverlayInside:\r\n\t\t\tnhandleOffset = space.handleSize;\r\n\t\t\tif (space.type === Type.Positioned) {\r\n\t\t\t\tnhandleOffset = 0;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ResizeHandlePlacement.OverlayBoundary:\r\n\t\t\tnhandleOffset = space.handleSize / 2;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tconst handleOffset = `${nhandleOffset}px`;\r\n\r\n\tconst addHandleCss = (id: string, pos: { left?: string; top?: string; right?: string; bottom?: string; width?: string; height?: string }) => {\r\n\t\tconst styles: string[] = [];\r\n\r\n\t\tif (pos.left) styles.push(`left: ${pos.left}`);\r\n\t\tif (pos.top) styles.push(`top: ${pos.top}`);\r\n\t\tif (pos.right) styles.push(`right: ${pos.right}`);\r\n\t\tif (pos.bottom) styles.push(`bottom: ${pos.bottom}`);\r\n\t\tif (pos.width) styles.push(`width: ${pos.width}`);\r\n\t\tif (pos.height) styles.push(`height: ${pos.height}`);\r\n\r\n\t\tcssElements.push(`#${space.id}-${id} { ${styles.join(\"; \")}}`);\r\n\t};\r\n\r\n\tconst widthOrHeightSpecified = () =>\r\n\t\tspace.type === Type.Positioned\r\n\t\t\t? space.width.size && space.height.size\r\n\t\t\t: space.orientation == Orientation.Horizontal\r\n\t\t\t? space.width.size\r\n\t\t\t: space.height.size;\r\n\r\n\tif (space.canResizeLeft) {\r\n\t\tif (space.anchor) {\r\n\t\t\taddHandleCss(\"ml\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} + ${css(space.width)} - ${handleOffset})`,\r\n\t\t\t\ttop: `0`,\r\n\t\t\t\tbottom: `0`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"ml\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"ml:after\", {\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTop) {\r\n\t\tif (space.anchor) {\r\n\t\t\taddHandleCss(\"mt\", {\r\n\t\t\t\tleft: `0`,\r\n\t\t\t\tright: `0`,\r\n\t\t\t\tbottom: `calc(${css(space.bottom)} + ${css(space.height)} - ${handleOffset})`,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\tright: touchHandleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mt\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t\tif (widthOrHeightSpecified()) {\r\n\t\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\t\twidth: `calc(${css(space.width, true)} - ${handleOffset}) + ${negativeTouchHandleSize}`,\r\n\t\t\t\t\tright: touchHandleSize,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\t\twidth: css(space.width),\r\n\t\t\t\t\tright: touchHandleSize,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (space.canResizeRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mr:after\", {\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottom) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mb\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mb\", {\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mb:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTopLeft) {\r\n\t\taddHandleCss(\"mtl\", {\r\n\t\t\tleft: `calc(${css(space.left, true)} - ${handleOffset})`,\r\n\t\t\ttop: css(space.top),\r\n\t\t\twidth: handleSize,\r\n\t\t\theight: handleSize,\r\n\t\t});\r\n\t\taddHandleCss(\"mtl:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTopRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mtr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mtr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mtr:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottomLeft) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mbl\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mbl\", {\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mbl:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottomRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mbr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mbr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mbr:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\treturn cssElements.join(\" \");\r\n}\r\n\r\nexport function updateStyleDefinition(space: ISpaceDefinition) {\r\n\tconst definition = styleDefinition(space);\r\n\tif (!isServer()) {\r\n\t\tconst existing = document.getElementById(`style_${space.id}`);\r\n\t\tif (existing) {\r\n\t\t\tif (existing.innerHTML !== definition) {\r\n\t\t\t\texisting.innerHTML = definition;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst newStyle = document.createElement(\"style\");\r\n\t\t\tnewStyle.id = `style_${space.id}`;\r\n\t\t\tnewStyle.innerHTML = definition;\r\n\t\t\tdocument.head.appendChild(newStyle);\r\n\t\t}\r\n\t} else {\r\n\t\tspace.ssrStyle = definition;\r\n\t}\r\n}\r\n\r\nexport function removeStyleDefinition(space: ISpaceDefinition) {\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\tif (existing) {\r\n\t\tdocument.head.removeChild(existing);\r\n\t}\r\n}\r\n\r\nexport function isServer() {\r\n\tif (typeof document !== \"undefined\") {\r\n\t\tif (document) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n","import { SyntheticEvent } from \"react\";\r\nimport { ISpaceDefinition, ResizeType, ISpaceStore, OnResizeEnd, EndEvent, MoveEvent, Type, ISize } from \"./core-types\";\r\nimport { coalesce, throttle } from \"./core-utils\";\r\n\r\nconst RESIZE_THROTTLE = 0;\r\n\r\nexport interface IResizeChange {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nfunction isHorizontal(resizeType: ResizeType) {\r\n\treturn resizeType === ResizeType.Left || resizeType === ResizeType.Right;\r\n}\r\n\r\ntype ResizeAdjuster = (currentX: number, currentY: number) => void;\r\n\r\nfunction createSideAdjuster(\r\n\trect: DOMRect,\r\n\tresizeType: ResizeType,\r\n\tdimensionToAdjust: ISize,\r\n\tspace: ISpaceDefinition,\r\n\toriginalX: number,\r\n\toriginalY: number,\r\n): ResizeAdjuster {\r\n\tconst negater = resizeType === ResizeType.Right || resizeType === ResizeType.Bottom ? (val: number) => -val : (val: number) => val;\r\n\r\n\tconst candidateOppositeDimensionToAdjust = isHorizontal(resizeType) ? space.width : space.height;\r\n\r\n\tconst offset1 = dimensionToAdjust.resized;\r\n\tconst offset2 = candidateOppositeDimensionToAdjust.resized;\r\n\r\n\tconst size = isHorizontal(resizeType) ? rect.width : rect.height;\r\n\tconst minimumAdjust = coalesce(space.minimumSize, 20)! - size + 0;\r\n\tconst maximumAdjust = space.maximumSize ? space.maximumSize - size + 0 : undefined;\r\n\r\n\treturn (currentX: number, currentY: number) => {\r\n\t\tlet adjustment = (isHorizontal(resizeType) ? originalX : originalY) - (isHorizontal(resizeType) ? currentX : currentY);\r\n\t\tlet dimensionResized = negater(adjustment);\r\n\r\n\t\tif (space.type !== Type.Positioned) {\r\n\t\t\tdimensionResized = Math.max(negater(adjustment), minimumAdjust);\r\n\r\n\t\t\tif (dimensionResized < minimumAdjust) {\r\n\t\t\t\tdimensionResized = minimumAdjust;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof maximumAdjust === \"number\") {\r\n\t\t\t\tif (dimensionResized > maximumAdjust) {\r\n\t\t\t\t\tdimensionResized = maximumAdjust;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dimensionToAdjust.size !== undefined) {\r\n\t\t\tdimensionToAdjust.resized = negater(-adjustment) + offset1;\r\n\t\t\tif (candidateOppositeDimensionToAdjust.size) {\r\n\t\t\t\tcandidateOppositeDimensionToAdjust.resized = negater(adjustment) + offset2;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcandidateOppositeDimensionToAdjust.resized = dimensionResized + offset2;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction createAdjuster(resizeType: ResizeType, space: ISpaceDefinition, originalX: number, originalY: number): ResizeAdjuster {\r\n\tconst rect = space.element.getBoundingClientRect();\r\n\tswitch (resizeType) {\r\n\t\tcase ResizeType.Left:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.left, space, originalX, originalY);\r\n\t\tcase ResizeType.Right:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.right, space, originalX, originalY);\r\n\t\tcase ResizeType.Bottom:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.bottom, space, originalX, originalY);\r\n\t\tcase ResizeType.Top:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.top, space, originalX, originalY);\r\n\t\tcase ResizeType.TopLeft:\r\n\t\t\tconst topAdjuster = createSideAdjuster(rect, ResizeType.Top, space.top, space, originalX, originalY);\r\n\t\t\tconst leftAdjuster = createSideAdjuster(rect, ResizeType.Left, space.left, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\ttopAdjuster(x, y);\r\n\t\t\t\tleftAdjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.TopRight:\r\n\t\t\tconst top1Adjuster = createSideAdjuster(rect, ResizeType.Top, space.top, space, originalX, originalY);\r\n\t\t\tconst rightAdjuster = createSideAdjuster(rect, ResizeType.Right, space.right, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\ttop1Adjuster(x, y);\r\n\t\t\t\trightAdjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.BottomLeft:\r\n\t\t\tconst bottomAdjuster = createSideAdjuster(rect, ResizeType.Bottom, space.bottom, space, originalX, originalY);\r\n\t\t\tconst left1Adjuster = createSideAdjuster(rect, ResizeType.Left, space.left, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\tbottomAdjuster(x, y);\r\n\t\t\t\tleft1Adjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.BottomRight:\r\n\t\t\tconst bottom1Adjuster = createSideAdjuster(rect, ResizeType.Bottom, space.bottom, space, originalX, originalY);\r\n\t\t\tconst right1Adjuster = createSideAdjuster(rect, ResizeType.Right, space.right, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\tbottom1Adjuster(x, y);\r\n\t\t\t\tright1Adjuster(x, y);\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\tthrow `Resize type ${resizeType} not supported`;\r\n\t}\r\n}\r\n\r\nexport function createResize(store: ISpaceStore) {\r\n\treturn {\r\n\t\tstartResize<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\r\n\t\t\te: T,\r\n\t\t\tresizeType: ResizeType,\r\n\t\t\tspace: ISpaceDefinition,\r\n\t\t\tendEvent: EndEvent,\r\n\t\t\tmoveEvent: MoveEvent,\r\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\r\n\t\t\tonResizeEnd?: OnResizeEnd,\r\n\t\t) {\r\n\t\t\tif (space.onResizeStart) {\r\n\t\t\t\tconst result = space.onResizeStart(resizeType);\r\n\t\t\t\tif (typeof result === \"boolean\" && !result) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst originalCoords = getCoords(e);\r\n\t\t\tconst adjuster = createAdjuster(resizeType, space, originalCoords.x, originalCoords.y);\r\n\r\n\t\t\tspace.resizing = true;\r\n\t\t\tspace.updateParent();\r\n\r\n\t\t\tlet lastX = 0;\r\n\t\t\tlet lastY = 0;\r\n\t\t\tlet moved = false;\r\n\r\n\t\t\tconst resize = (currentX: number, currentY: number) => {\r\n\t\t\t\tadjuster(currentX, currentY);\r\n\t\t\t\tstore.updateStyles(space);\r\n\t\t\t};\r\n\r\n\t\t\tconst withPreventDefault = (e: T) => {\r\n\t\t\t\tmoved = true;\r\n\t\t\t\tconst newCoords = getCoords(e);\r\n\t\t\t\tlastX = newCoords.x;\r\n\t\t\t\tlastY = newCoords.y;\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif (RESIZE_THROTTLE > 0) {\r\n\t\t\t\t\tthrottle(\r\n\t\t\t\t\t\t(x, y) =>\r\n\t\t\t\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\t\t\t\tif (space.resizing) {\r\n\t\t\t\t\t\t\t\t\tresize(x, y);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tRESIZE_THROTTLE,\r\n\t\t\t\t\t)(lastX, lastY);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\t\tif (space.resizing) {\r\n\t\t\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst removeListener = () => {\r\n\t\t\t\tspace.resizing = false;\r\n\r\n\t\t\t\tif (moved) {\r\n\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\t\twindow.removeEventListener(endEvent, removeListener);\r\n\t\t\t\tspace.updateParent();\r\n\r\n\t\t\t\tconst resizeEnd = onResizeEnd || space.onResizeEnd;\r\n\t\t\t\tif (resizeEnd) {\r\n\t\t\t\t\tconst currentRect = space.element.getBoundingClientRect();\r\n\t\t\t\t\tresizeEnd(Math.floor(isHorizontal(resizeType) ? currentRect.width : currentRect.height), currentRect as DOMRect, resizeType);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\twindow.addEventListener(endEvent, removeListener);\r\n\t\t},\r\n\t};\r\n}\r\n","import { SyntheticEvent } from \"react\";\nimport { ISpaceDefinition, ISpaceStore, EndEvent, MoveEvent, OnDragEnd } from \"./core-types\";\nimport { throttle } from \"./core-utils\";\n\nexport function createDrag(store: ISpaceStore) {\n\tfunction onMove(space: ISpaceDefinition, originalX: number, originalY: number, x: number, y: number) {\n\t\tconst adjustmentX = -(originalX - x);\n\t\tconst adjustmentY = -(originalY - y);\n\n\t\tspace.left.adjusted = [adjustmentX];\n\t\tspace.top.adjusted = [adjustmentY];\n\n\t\tif (space.right.size) {\n\t\t\tspace.right.adjusted = [-adjustmentX];\n\t\t}\n\n\t\tif (space.bottom.size) {\n\t\t\tspace.bottom.adjusted = [-adjustmentY];\n\t\t}\n\n\t\tstore.updateStyles(space);\n\t}\n\n\treturn {\n\t\tstartDrag<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\n\t\t\te: T,\n\t\t\tspace: ISpaceDefinition,\n\t\t\tendEvent: EndEvent,\n\t\t\tmoveEvent: MoveEvent,\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\n\t\t\tonDragEnd?: OnDragEnd,\n\t\t) {\n\t\t\tif (space.element) {\n\t\t\t\tconst coords = getCoords(e);\n\t\t\t\tconst adjustedLeft = space.left.adjusted.length === 0 ? 0 : (space.left.adjusted[0] as number);\n\t\t\t\tconst adjustedTop = space.top.adjusted.length === 0 ? 0 : (space.top.adjusted[0] as number);\n\t\t\t\tconst originalMouseX = coords.x - adjustedLeft;\n\t\t\t\tconst originalMouseY = coords.y - adjustedTop;\n\t\t\t\tlet lastX = 0;\n\t\t\t\tlet lastY = 0;\n\t\t\t\tlet moved = false;\n\n\t\t\t\tconst mouseMove = (x: number, y: number) => onMove(space, originalMouseX, originalMouseY, x, y);\n\t\t\t\tconst throttledMouseMove = throttle<typeof mouseMove>(mouseMove, 5);\n\n\t\t\t\tconst withPreventDefault = (e: T) => {\n\t\t\t\t\tmoved = true;\n\t\t\t\t\tconst newCoords = getCoords(e);\n\t\t\t\t\tlastX = newCoords.x;\n\t\t\t\t\tlastY = newCoords.y;\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tthrottledMouseMove(lastX, lastY);\n\t\t\t\t};\n\n\t\t\t\tconst removeListener = () => {\n\t\t\t\t\tif (moved) {\n\t\t\t\t\t\tmouseMove(lastX, lastY);\n\t\t\t\t\t}\n\t\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\t\twindow.removeEventListener(endEvent, removeListener);\n\n\t\t\t\t\tif (onDragEnd) {\n\t\t\t\t\t\tconst parentInfo = (space.parentId && store.getSpace(space.parentId)?.element.getBoundingClientRect()) || {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst info = (({ left, top, right, bottom, width, height }) => ({ left, top, right, bottom, width, height }))(\n\t\t\t\t\t\t\tspace.element.getBoundingClientRect(),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tonDragEnd(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tleft: info.left - parentInfo.left,\n\t\t\t\t\t\t\t\t\ttop: info.top - parentInfo.top,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmoved,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\twindow.addEventListener(endEvent, removeListener);\n\t\t\t}\n\t\t},\n\t};\n}\n","import {\r\n\tISpaceDefinition,\r\n\tSizeUnit,\r\n\tAnchorType,\r\n\tType,\r\n\tOrientation,\r\n\tEndEvent,\r\n\tMoveEvent,\r\n\tISpaceStore,\r\n\tISpaceProps,\r\n\tCenterType,\r\n\tResizeHandlePlacement,\r\n} from \"./core-types\";\r\nimport { createResize } from \"./core-resizing\";\r\nimport { updateStyleDefinition, removeStyleDefinition, coalesce, adjustmentsEqual } from \"./core-utils\";\r\nimport { createDrag } from \"./core-dragging\";\r\n\r\nconst spaceDefaults: Partial<ISpaceDefinition> = {\r\n\tid: \"\",\r\n\tzIndex: 0,\r\n\tscrollable: false,\r\n\tresizing: false,\r\n\tallowOverflow: false,\r\n\tcenterContent: \"none\",\r\n\tdimension: { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" },\r\n\thandleSize: 5,\r\n\ttouchHandleSize: 5,\r\n\thandlePlacement: ResizeHandlePlacement.OverlayInside,\r\n\tadjustLeft: () => false,\r\n\tadjustRight: () => false,\r\n\tadjustTop: () => false,\r\n\tadjustBottom: () => false,\r\n\tadjustEdge: () => false,\r\n\tanchoredChildren: () => [],\r\n};\r\n\r\nconst anchorTypes = [AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom];\r\n\r\nfunction getPosition(type: Type) {\r\n\tif (type === Type.ViewPort) {\r\n\t\treturn \"fixed\";\r\n\t}\r\n\tif (type === Type.Fixed) {\r\n\t\treturn \"relative\";\r\n\t}\r\n\treturn \"absolute\";\r\n}\r\n\r\nfunction getOrientation(anchor: AnchorType | undefined) {\r\n\treturn anchor === AnchorType.Bottom || anchor === AnchorType.Top ? Orientation.Vertical : Orientation.Horizontal;\r\n}\r\n\r\nfunction anchorUpdates(space: ISpaceDefinition) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Left,\r\n\t\t\tupdate: space.adjustLeft,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Top,\r\n\t\t\tupdate: space.adjustTop,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Right,\r\n\t\t\tupdate: space.adjustRight,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Bottom,\r\n\t\t\tupdate: space.adjustBottom,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction sizeInfoDefault(size: SizeUnit) {\r\n\treturn { size: size, adjusted: [], resized: 0 };\r\n}\r\n\r\nexport function createStore(): ISpaceStore {\r\n\tlet spaces: ISpaceDefinition[] = [];\r\n\r\n\tconst setSpaces = (newSpaces: ISpaceDefinition[]) => {\r\n\t\tspaces = newSpaces;\r\n\t};\r\n\r\n\tconst getSpace = (id: string) => {\r\n\t\treturn getSpaces().find((s) => s.id === id);\r\n\t};\r\n\r\n\tconst getSpaces = () => spaces;\r\n\r\n\tconst recalcSpaces = (parent: ISpaceDefinition) => {\r\n\t\tconst onlyUnique = (value: number, index: number, self: number[]) => {\r\n\t\t\treturn self.indexOf(value) === index;\r\n\t\t};\r\n\r\n\t\tconst addDefaultOrders = (spaces: ISpaceDefinition[]) => {\r\n\t\t\tlet result: ISpaceDefinition[] = [];\r\n\r\n\t\t\tanchorTypes.forEach((t) => {\r\n\t\t\t\tconst anchoredSpaces = spaces.filter((s) => s.anchor !== undefined && s.anchor === t);\r\n\t\t\t\tconst zIndices = anchoredSpaces.map((s) => s.zIndex).filter(onlyUnique);\r\n\t\t\t\tzIndices.forEach((i) => {\r\n\t\t\t\t\tconst anchoredSpacesInLayer = anchoredSpaces.filter((s) => s.zIndex === i);\r\n\t\t\t\t\tconst orderedSpaces = anchoredSpacesInLayer.filter((c) => c.order !== undefined);\r\n\t\t\t\t\tconst unorderedSpaces = anchoredSpacesInLayer.filter((c) => c.order === undefined);\r\n\t\t\t\t\tvar maxOrder = orderedSpaces.length > 0 ? orderedSpaces.map((a) => a.order!).reduce((a, b) => Math.max(a, b)) : 0;\r\n\t\t\t\t\tresult = [...result, ...[...orderedSpaces, ...unorderedSpaces.map((c, idx) => ({ ...c, ...{ order: maxOrder + idx + 1 } }))]];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn [...result, ...spaces.filter((s) => s.anchor === undefined)];\r\n\t\t};\r\n\r\n\t\tconst orderedSpaces = addDefaultOrders(parent.children);\r\n\t\tfor (var i = 0, len = orderedSpaces.length; i < len; i++) {\r\n\t\t\tconst space = orderedSpaces[i];\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type === Type.Fill) {\r\n\t\t\t\tanchorUpdates(space).forEach((info) => {\r\n\t\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\t\tconst anchoredSpaces = parent.anchoredChildren(orderedSpaces, info.anchor, space.zIndex);\r\n\r\n\t\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (info.update(adjusted)) {\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (space.type === Type.Anchored) {\r\n\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\tconst anchoredSpaces = parent\r\n\t\t\t\t\t.anchoredChildren(orderedSpaces, space.anchor!, space.zIndex)\r\n\t\t\t\t\t.filter((s) => s.id !== space.id && s.order! <= space.order!);\r\n\r\n\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (space.adjustEdge(adjusted)) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst store: ISpaceStore = {\r\n\t\tgetSpaces: getSpaces,\r\n\t\tgetSpace: getSpace,\r\n\t\taddSpace: (space) => {\r\n\t\t\tgetSpaces().push(space);\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children.push(space);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tremoveSpace: (space) => {\r\n\t\t\tsetSpaces(getSpaces().filter((s) => s.id !== space.id));\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children = parentSpace.children.filter((s) => s.id !== space.id);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tremoveStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateStyles: (space) => {\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parent = getSpace(space.parentId);\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\trecalcSpaces(parent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateSpace: (space, props) => {\r\n\t\t\tconst {\r\n\t\t\t\ttype,\r\n\t\t\t\tanchor,\r\n\t\t\t\torder,\r\n\t\t\t\tzIndex,\r\n\t\t\t\tscrollable,\r\n\t\t\t\tposition,\r\n\t\t\t\tcenterContent,\r\n\t\t\t\tminimumSize,\r\n\t\t\t\tmaximumSize,\r\n\t\t\t\thandleSize,\r\n\t\t\t\ttouchHandleSize,\r\n\t\t\t\thandlePlacement,\r\n\t\t\t\tallowOverflow,\r\n\t\t\t} = props;\r\n\t\t\tconst canResizeLeft = (position && position.leftResizable) || false;\r\n\t\t\tconst canResizeRight = (position && position.rightResizable) || false;\r\n\t\t\tconst canResizeTop = (position && position.topResizable) || false;\r\n\t\t\tconst canResizeBottom = (position && position.bottomResizable) || false;\r\n\t\t\tconst canResizeTopLeft = (position && position.topLeftResizable) || false;\r\n\t\t\tconst canResizeTopRight = (position && position.topRightResizable) || false;\r\n\t\t\tconst canResizeBottomLeft = (position && position.bottomLeftResizable) || false;\r\n\t\t\tconst canResizeBottomRight = (position && position.bottomRightResizable) || false;\r\n\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type !== type) {\r\n\t\t\t\tspace.type = type;\r\n\t\t\t\tspace.position = getPosition(type);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.anchor !== anchor) {\r\n\t\t\t\tspace.anchor = anchor;\r\n\t\t\t\tspace.orientation = getOrientation(anchor);\r\n\t\t\t\tchanged = true;\r\n\r\n\t\t\t\tif (type === Type.Anchored) {\r\n\t\t\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustLeft;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustTop;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustRight;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (space.left.size !== (position && position.left)) {\r\n\t\t\t\tspace.left.size = position && position.left;\r\n\t\t\t\tspace.left.resized = 0;\r\n\t\t\t\tspace.left.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.right.size !== (position && position.right)) {\r\n\t\t\t\tspace.right.size = position && position.right;\r\n\t\t\t\tspace.right.resized = 0;\r\n\t\t\t\tspace.right.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.top.size !== (position && position.top)) {\r\n\t\t\t\tspace.top.size = position && position.top;\r\n\t\t\t\tspace.top.resized = 0;\r\n\t\t\t\tspace.top.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.bottom.size !== (position && position.bottom)) {\r\n\t\t\t\tspace.bottom.size = position && position.bottom;\r\n\t\t\t\tspace.bottom.resized = 0;\r\n\t\t\t\tspace.bottom.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.width.size !== (position && position.width)) {\r\n\t\t\t\tspace.width.size = position && position.width;\r\n\t\t\t\tspace.width.resized = 0;\r\n\t\t\t\tspace.width.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.height.size !== (position && position.height)) {\r\n\t\t\t\tspace.height.size = position && position.height;\r\n\t\t\t\tspace.height.resized = 0;\r\n\t\t\t\tspace.height.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.order, 0) !== coalesce(order, 0)) {\r\n\t\t\t\tspace.order = coalesce(order, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.zIndex, 0) !== coalesce(zIndex, 0)) {\r\n\t\t\t\tspace.zIndex = coalesce(zIndex, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.scrollable, false) !== coalesce(scrollable, false)) {\r\n\t\t\t\tspace.scrollable = coalesce(scrollable, false)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.minimumSize !== minimumSize) {\r\n\t\t\t\tspace.minimumSize = minimumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.maximumSize !== maximumSize) {\r\n\t\t\t\tspace.maximumSize = maximumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.centerContent, CenterType.None) !== coalesce(centerContent, CenterType.None)) {\r\n\t\t\t\tspace.centerContent = coalesce(centerContent, CenterType.None)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handleSize !== handleSize) {\r\n\t\t\t\tspace.handleSize = handleSize || spaceDefaults.handleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.touchHandleSize !== touchHandleSize) {\r\n\t\t\t\tspace.touchHandleSize = touchHandleSize || spaceDefaults.touchHandleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handlePlacement !== handlePlacement) {\r\n\t\t\t\tspace.handlePlacement = handlePlacement || spaceDefaults.handlePlacement!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottom !== canResizeBottom) {\r\n\t\t\t\tspace.canResizeBottom = canResizeBottom;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTop !== canResizeTop) {\r\n\t\t\t\tspace.canResizeTop = canResizeTop;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeLeft !== canResizeLeft) {\r\n\t\t\t\tspace.canResizeLeft = canResizeLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeRight !== canResizeRight) {\r\n\t\t\t\tspace.canResizeRight = canResizeRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTopLeft !== canResizeTopLeft) {\r\n\t\t\t\tspace.canResizeTopLeft = canResizeTopLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTopRight !== canResizeTopRight) {\r\n\t\t\t\tspace.canResizeTopRight = canResizeTopRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottomLeft !== canResizeBottomLeft) {\r\n\t\t\t\tspace.canResizeBottomLeft = canResizeBottomLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottomRight !== canResizeBottomRight) {\r\n\t\t\t\tspace.canResizeBottomRight = canResizeBottomRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.allowOverflow !== allowOverflow) {\r\n\t\t\t\tspace.allowOverflow = allowOverflow || spaceDefaults.allowOverflow!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tif (space.parentId) {\r\n\t\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateSpace: () => ({} as ISpaceDefinition),\r\n\t\tstartMouseResize: () => null,\r\n\t\tstartTouchResize: () => null,\r\n\t\tstartMouseDrag: () => null,\r\n\t\tstartTouchDrag: () => null,\r\n\t};\r\n\r\n\tconst resize = createResize(store);\r\n\tconst drag = createDrag(store);\r\n\r\n\tstore.createSpace = (parentId: string | undefined, props: ISpaceProps, update: () => void) => {\r\n\t\tconst { position, anchor, type, ...commonProps } = props;\r\n\t\tconst canResizeLeft = (position && position.rightResizable) || false;\r\n\t\tconst canResizeRight = (position && position.leftResizable) || false;\r\n\t\tconst canResizeTop = (position && position.bottomResizable) || false;\r\n\t\tconst canResizeBottom = (position && position.topResizable) || false;\r\n\t\tconst canResizeTopLeft = (position && position.topLeftResizable) || false;\r\n\t\tconst canResizeTopRight = (position && position.topRightResizable) || false;\r\n\t\tconst canResizeBottomLeft = (position && position.bottomLeftResizable) || false;\r\n\t\tconst canResizeBottomRight = (position && position.bottomRightResizable) || false;\r\n\r\n\t\tconst newSpace: ISpaceDefinition = {\r\n\t\t\t...spaceDefaults,\r\n\t\t\t...commonProps,\r\n\t\t\t...{\r\n\t\t\t\tstore: store,\r\n\t\t\t\tupdate: update,\r\n\t\t\t\tupdateParent: () => {\r\n\t\t\t\t\tif (parentId) {\r\n\t\t\t\t\t\tconst parentSpace = store.getSpace(parentId);\r\n\t\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\t\tparentSpace.update();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tparentId: parentId,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tanchor: anchor,\r\n\t\t\t\ttype: type,\r\n\t\t\t\torientation: getOrientation(anchor),\r\n\t\t\t\tposition: getPosition(type),\r\n\t\t\t\tleft: sizeInfoDefault(position && position.left),\r\n\t\t\t\tright: sizeInfoDefault(position && position.right),\r\n\t\t\t\ttop: sizeInfoDefault(position && position.top),\r\n\t\t\t\tbottom: sizeInfoDefault(position && position.bottom),\r\n\t\t\t\twidth: sizeInfoDefault(position && position.width),\r\n\t\t\t\theight: sizeInfoDefault(position && position.height),\r\n\t\t\t\tcanResizeLeft: canResizeLeft,\r\n\t\t\t\tcanResizeRight: canResizeRight,\r\n\t\t\t\tcanResizeTop: canResizeTop,\r\n\t\t\t\tcanResizeBottom: canResizeBottom,\r\n\t\t\t\tcanResizeTopLeft: canResizeTopLeft,\r\n\t\t\t\tcanResizeTopRight: canResizeTopRight,\r\n\t\t\t\tcanResizeBottomLeft: canResizeBottomLeft,\r\n\t\t\t\tcanResizeBottomRight: canResizeBottomRight,\r\n\t\t\t},\r\n\t\t} as ISpaceDefinition;\r\n\r\n\t\tnewSpace.anchoredChildren = (children, chanchor, zIndex) => {\r\n\t\t\treturn children.filter((s) => s.type === Type.Anchored && s.anchor === chanchor && s.zIndex === zIndex);\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustLeft = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.left.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.left.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustRight = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.right.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.right.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustTop = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.top.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.top.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustBottom = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.bottom.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.bottom.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tif (type === Type.Anchored) {\r\n\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustLeft;\r\n\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustTop;\r\n\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustRight;\r\n\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustBottom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newSpace;\r\n\t};\r\n\r\n\tstore.startMouseResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startMouseDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\treturn store;\r\n}\r\n","import * as React from \"react\";\r\nimport { createStore } from \"./core\";\r\nimport {\r\n\tISpaceProps,\r\n\tISpaceStore,\r\n\tISpaceDefinition,\r\n\tResizeType,\r\n\tCenterType,\r\n\tISpaceContext,\r\n\tICommonProps,\r\n\tResizeMouseEvent,\r\n\tOnDragEnd,\r\n\tResizeTouchEvent,\r\n} from \"./core-types\";\r\nimport { coalesce, shortuuid } from \"./core-utils\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\n// WORKAROUND for React18 strict mode\r\n// https://blog.ag-grid.com/avoiding-react-18-double-mount/\r\nexport const useEffectOnce = (effect: () => void | (() => void)) => {\r\n\tconst destroyFunc = useRef<void | (() => void)>();\r\n\tconst effectCalled = useRef(false);\r\n\tconst renderAfterCalled = useRef(false);\r\n\tconst [_val, setVal] = useState<number>(0);\r\n\r\n\tif (effectCalled.current) {\r\n\t\trenderAfterCalled.current = true;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t// only execute the effect first time around\r\n\t\tif (!effectCalled.current) {\r\n\t\t\tdestroyFunc.current = effect();\r\n\t\t\teffectCalled.current = true;\r\n\t\t}\r\n\r\n\t\t// this forces one render after the effect is run\r\n\t\tsetVal((val) => val + 1);\r\n\r\n\t\treturn () => {\r\n\t\t\t// if the comp didn't render since the useEffect was called,\r\n\t\t\t// we know it's the dummy React cycle\r\n\t\t\tif (!renderAfterCalled.current) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (destroyFunc.current) {\r\n\t\t\t\tdestroyFunc.current();\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n};\r\n\r\nexport const ParentContext = React.createContext<string | undefined>(undefined);\r\nexport const DOMRectContext = React.createContext<DOMRect | undefined>(undefined);\r\nexport const LayerContext = React.createContext<number | undefined>(undefined);\r\nexport const OptionsContext = React.createContext<IReactSpacesOptions>({});\r\nexport const currentStore = createStore();\r\n\r\nexport const commonProps = {\r\n\tid: PropTypes.string,\r\n\tclassName: PropTypes.string,\r\n\tstyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n\tas: PropTypes.any,\r\n\tcenterContent: PropTypes.oneOf([CenterType.None, CenterType.Vertical, CenterType.HorizontalVertical]),\r\n\tzIndex: PropTypes.number,\r\n\tscrollable: PropTypes.bool,\r\n\ttrackSize: PropTypes.bool,\r\n\tallowOverflow: PropTypes.bool,\r\n\thandleRender: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonTouchStart: PropTypes.func,\r\n\tonTouchMove: PropTypes.func,\r\n\tonTouchEnd: PropTypes.func,\r\n};\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport interface IReactEvents {\r\n\tonClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonDoubleClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseDown?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseEnter?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseLeave?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseMove?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchMove?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchEnd?: (event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface IReactSpaceCommonProps extends ICommonProps, IReactEvents {\r\n\tstyle?: React.CSSProperties;\r\n\tas?: keyof React.ReactDOM | React.ComponentType<ICommonProps>;\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport interface IReactSpaceInnerProps extends IReactSpaceCommonProps, ISpaceProps, IReactEvents {\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n}\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport function useForceUpdate() {\r\n\tconst [, setTick] = React.useState(0);\r\n\treturn React.useCallback(() => {\r\n\t\tsetTick((tick) => tick + 1);\r\n\t}, []);\r\n}\r\n\r\nexport function useUniqueId() {\r\n\tif (SSR_SUPPORT_ENABLED) {\r\n\t\tif (React.version.startsWith(\"18\")) {\r\n\t\t\treturn `s${React.useId().replace(/\\:/g, \"\")}`;\r\n\t\t}\r\n\t}\r\n\r\n\treturn `s${shortuuid()}`;\r\n}\r\n\r\nexport function useSpace(props: IReactSpaceInnerProps) {\r\n\tconst store = currentStore;\r\n\tconst update = useForceUpdate();\r\n\tconst parent = React.useContext(ParentContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst { debug } = React.useContext(OptionsContext);\r\n\tconst uniqueId = useUniqueId();\r\n\tconst [spaceId] = React.useState(props.id || uniqueId);\r\n\tconst elementRef = React.useRef<HTMLElement>();\r\n\tconst resizeSensor = React.useRef<ResizeSensor>();\r\n\tconst [domRect, setDomRect] = React.useState<DOMRect>();\r\n\r\n\tlet space = store.getSpace(spaceId)!;\r\n\r\n\tif (debug) {\r\n\t\tconsole.table(store.getSpaces());\r\n\t}\r\n\r\n\tconst parsedProps = {\r\n\t\t...props,\r\n\t\t...{\r\n\t\t\tid: spaceId,\r\n\t\t\tzIndex: coalesce(props.zIndex, layer),\r\n\t\t},\r\n\t};\r\n\r\n\tif (!space) {\r\n\t\tspace = store.createSpace(parent, parsedProps, update);\r\n\t\tstore.addSpace(space);\r\n\t} else {\r\n\t\tstore.updateSpace(space, parsedProps);\r\n\t}\r\n\r\n\tconst resizeHandles = useSpaceResizeHandles(store, space);\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tconst rect = elementRef.current ? elementRef.current.getBoundingClientRect() : new DOMRect();\r\n\t\tspace.dimension = {\r\n\t\t\t...rect,\r\n\t\t\t...{\r\n\t\t\t\tleft: Math.floor(rect.left),\r\n\t\t\t\ttop: Math.floor(rect.top),\r\n\t\t\t\tright: Math.floor(rect.right),\r\n\t\t\t\tbottom: Math.floor(rect.bottom),\r\n\t\t\t\twidth: Math.floor(rect.width),\r\n\t\t\t\theight: Math.floor(rect.height),\r\n\t\t\t\tx: Math.floor(rect.x),\r\n\t\t\t\ty: Math.floor(rect.y),\r\n\t\t\t},\r\n\t\t};\r\n\t\tsetDomRect(space.dimension);\r\n\r\n\t\tif (props.trackSize) {\r\n\t\t\tresizeSensor.current = new ResizeSensor(elementRef.current!, (size) => {\r\n\t\t\t\tspace.dimension = {\r\n\t\t\t\t\t...rect,\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\twidth: Math.floor(size.width),\r\n\t\t\t\t\t\theight: Math.floor(size.height),\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tsetDomRect(space.dimension);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tresizeSensor.current && resizeSensor.current.detach();\r\n\t\t\tstore.removeSpace(space);\r\n\t\t};\r\n\t});\r\n\r\n\treturn { space: space, resizeHandles: resizeHandles, domRect: domRect, elementRef: elementRef };\r\n}\r\n\r\nexport interface IResizeHandleProps {\r\n\tid?: string;\r\n\tkey: string | number;\r\n\tclassName?: string;\r\n\tonMouseDown: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart: (e: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nconst resizeSetup = [\r\n\t{ id: \"ml\", className: \"resize-left\", resizeType: ResizeType.Left, condition: (space: ISpaceDefinition) => space.canResizeLeft },\r\n\t{ id: \"mr\", className: \"resize-right\", resizeType: ResizeType.Right, condition: (space: ISpaceDefinition) => space.canResizeRight },\r\n\t{ id: \"mt\", className: \"resize-top\", resizeType: ResizeType.Top, condition: (space: ISpaceDefinition) => space.canResizeTop },\r\n\t{ id: \"mb\", className: \"resize-bottom\", resizeType: ResizeType.Bottom, condition: (space: ISpaceDefinition) => space.canResizeBottom },\r\n\t{ id: \"mtl\", className: \"resize-top-left\", resizeType: ResizeType.TopLeft, condition: (space: ISpaceDefinition) => space.canResizeTopLeft },\r\n\t{ id: \"mtr\", className: \"resize-top-right\", resizeType: ResizeType.TopRight, condition: (space: ISpaceDefinition) => space.canResizeTopRight },\r\n\t{\r\n\t\tid: \"mbl\",\r\n\t\tclassName: \"resize-bottom-left\",\r\n\t\tresizeType: ResizeType.BottomLeft,\r\n\t\tcondition: (space: ISpaceDefinition) => space.canResizeBottomLeft,\r\n\t},\r\n\t{\r\n\t\tid: \"mbr\",\r\n\t\tclassName: \"resize-bottom-right\",\r\n\t\tresizeType: ResizeType.BottomRight,\r\n\t\tcondition: (space: ISpaceDefinition) => space.canResizeBottomRight,\r\n\t},\r\n];\r\n\r\nexport function useSpaceResizeHandles(store: ISpaceStore, space: ISpaceDefinition) {\r\n\tconst mouseHandles: IResizeHandleProps[] = [];\r\n\r\n\tconst setupResizeHandle = (id: string, className: string, resizeType: ResizeType) => {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-${id}`,\r\n\t\t\tkey: id,\r\n\t\t\tclassName: `spaces-resize-handle ${className}`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(resizeType, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(resizeType, space, event),\r\n\t\t});\r\n\t};\r\n\r\n\tresizeSetup.forEach((resizeItem) => {\r\n\t\tif (resizeItem.condition(space)) {\r\n\t\t\tsetupResizeHandle(resizeItem.id, resizeItem.className, resizeItem.resizeType);\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tmouseHandles,\r\n\t};\r\n}\r\n\r\nexport function useCurrentSpace() {\r\n\tconst store = currentStore;\r\n\tconst spaceId = React.useContext(ParentContext);\r\n\r\n\tconst space = spaceId ? store.getSpace(spaceId) : undefined;\r\n\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst onMouseDrag = React.useCallback(\r\n\t\t(e: ResizeMouseEvent, onDragEnd: OnDragEnd | undefined) => (space ? store.startMouseDrag(space, e, onDragEnd) : null),\r\n\t\t[spaceId],\r\n\t);\r\n\tconst onTouchDrag = React.useCallback(\r\n\t\t(e: ResizeTouchEvent, onDragEnd: OnDragEnd | undefined) => (space ? store.startTouchDrag(space, e, onDragEnd) : null),\r\n\t\t[spaceId],\r\n\t);\r\n\tconst onForceUpdate = React.useCallback(() => (space ? store.updateStyles(space) : null), [spaceId]);\r\n\r\n\tconst defaults = { width: 0, height: 0, x: 0, y: 0 };\r\n\tconst size = {\r\n\t\t...defaults,\r\n\t\t...domRect,\r\n\t};\r\n\r\n\treturn {\r\n\t\tsize: size,\r\n\t\tlayer: layer || 0,\r\n\t\tstartMouseDrag: onMouseDrag,\r\n\t\tstartTouchDrag: onTouchDrag,\r\n\t\tforceUpdate: onForceUpdate,\r\n\t} as ISpaceContext;\r\n}\r\n\r\nexport let SSR_SUPPORT_ENABLED = false;\r\nexport function enabledSsrSupport() {\r\n\tSSR_SUPPORT_ENABLED = true;\r\n}\r\n","import * as React from \"react\";\r\n\r\ninterface IProps {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Centered: React.FC<IProps> = (props) => <div className={`spaces-centered`}>{props.children}</div>;\r\n","import * as React from \"react\";\r\n\r\ninterface IProps {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const CenteredVertically: React.FC<IProps> = (props) => <div className={`spaces-centered-vertically`}>{props.children}</div>;\r\n","import { CenterType, ResizeHandlePlacement, AnchorType, Type } from \"../core-types\";\r\nimport {\r\n\tuseSpace,\r\n\tParentContext,\r\n\tLayerContext,\r\n\tDOMRectContext,\r\n\tIReactSpaceInnerProps,\r\n\tuseEffectOnce,\r\n\tSSR_SUPPORT_ENABLED,\r\n\tuseUniqueId,\r\n} from \"../core-react\";\r\nimport * as React from \"react\";\r\nimport { Centered } from \"./Centered\";\r\nimport { CenteredVertically } from \"./CenteredVertically\";\r\nimport { isServer, updateStyleDefinition } from \"../core-utils\";\r\n\r\nfunction applyCentering(children: React.ReactNode, centerType: CenterType | undefined) {\r\n\tswitch (centerType) {\r\n\t\tcase CenterType.Vertical:\r\n\t\t\treturn <CenteredVertically>{children}</CenteredVertically>;\r\n\t\tcase CenterType.HorizontalVertical:\r\n\t\t\treturn <Centered>{children}</Centered>;\r\n\t}\r\n\treturn children;\r\n}\r\n\r\nexport class Space extends React.Component<IReactSpaceInnerProps> {\r\n\tpublic render() {\r\n\t\treturn <SpaceInner {...this.props} wrapperInstance={this} />;\r\n\t}\r\n}\r\n\r\nconst SpaceInner: React.FC<IReactSpaceInnerProps & { wrapperInstance: Space }> = (props) => {\r\n\tlet idToUse = props.id ?? props.wrapperInstance[\"_react_spaces_uniqueid\"];\r\n\tconst [initialRender, setInitialRender] = React.useState(SSR_SUPPORT_ENABLED ? true : false);\r\n\r\n\tconst uniqueId = useUniqueId();\r\n\r\n\tif (!idToUse) {\r\n\t\tprops.wrapperInstance[\"_react_spaces_uniqueid\"] = uniqueId;\r\n\t\tidToUse = props.wrapperInstance[\"_react_spaces_uniqueid\"];\r\n\t}\r\n\r\n\tconst {\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonDoubleClick,\r\n\t\tonMouseDown,\r\n\t\tonMouseEnter,\r\n\t\tonMouseLeave,\r\n\t\tonMouseMove,\r\n\t\tonTouchStart,\r\n\t\tonTouchMove,\r\n\t\tonTouchEnd,\r\n\t\tchildren,\r\n\t\thandleRender,\r\n\t} = props;\r\n\r\n\tconst events = {\r\n\t\tonClick: onClick,\r\n\t\tonDoubleClick: onDoubleClick,\r\n\t\tonMouseDown: onMouseDown,\r\n\t\tonMouseEnter: onMouseEnter,\r\n\t\tonMouseLeave: onMouseLeave,\r\n\t\tonMouseMove: onMouseMove,\r\n\t\tonTouchStart: onTouchStart,\r\n\t\tonTouchMove: onTouchMove,\r\n\t\tonTouchEnd: onTouchEnd,\r\n\t};\r\n\r\n\tconst { space, domRect, elementRef, resizeHandles } = useSpace({\r\n\t\t...props,\r\n\t\t...{ id: idToUse },\r\n\t});\r\n\r\n\tif (SSR_SUPPORT_ENABLED && !isServer()) {\r\n\t\tconst preRenderedStyle = document.getElementById(`style_${idToUse}_ssr`);\r\n\t\tif (preRenderedStyle) {\r\n\t\t\tspace.ssrStyle = preRenderedStyle.innerHTML;\r\n\t\t}\r\n\t\tupdateStyleDefinition(space);\r\n\t}\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tspace.element = elementRef.current!;\r\n\r\n\t\tif (SSR_SUPPORT_ENABLED) {\r\n\t\t\tif (initialRender) {\r\n\t\t\t\tsetInitialRender(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst userClasses = className ? className.split(\" \").map((c) => c.trim()) : [];\r\n\r\n\tconst outerClasses = [\r\n\t\t...[\"spaces-space\", space.children.find((s) => s.resizing) ? \"spaces-resizing\" : undefined],\r\n\t\t...[space.type === Type.Fixed ? \"spaces-fixedsize-layout\" : undefined],\r\n\t\t...[space.type === Type.ViewPort ? \"spaces-fullpage-layout\" : undefined],\r\n\t\t...userClasses.map((c) => `${c}-container`),\r\n\t].filter((c) => c);\r\n\r\n\tconst innerClasses = [...[\"spaces-space-inner\"], ...userClasses];\r\n\r\n\tlet innerStyle = style;\r\n\tif (space.handlePlacement === ResizeHandlePlacement.Inside) {\r\n\t\tinnerStyle = {\r\n\t\t\t...style,\r\n\t\t\t...{\r\n\t\t\t\tleft: space.anchor === AnchorType.Right ? space.handleSize : undefined,\r\n\t\t\t\tright: space.anchor === AnchorType.Left ? space.handleSize : undefined,\r\n\t\t\t\ttop: space.anchor === AnchorType.Bottom ? space.handleSize : undefined,\r\n\t\t\t\tbottom: space.anchor === AnchorType.Top ? space.handleSize : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tconst centeredContent = applyCentering(children, props.centerContent);\r\n\r\n\tconst outerProps = {\r\n\t\t...{\r\n\t\t\tid: space.id,\r\n\t\t\tref: elementRef,\r\n\t\t\tclassName: outerClasses.join(\" \"),\r\n\t\t},\r\n\t\t...events,\r\n\t} as any;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{resizeHandles.mouseHandles.map((handleProps) => handleRender?.(handleProps) || <div {...handleProps} />)}\r\n\t\t\t{SSR_SUPPORT_ENABLED && space.ssrStyle && initialRender && <style id={`style_${space.id}_ssr`}>{space.ssrStyle}</style>}\r\n\t\t\t{React.createElement(\r\n\t\t\t\tprops.as || \"div\",\r\n\t\t\t\touterProps,\r\n\t\t\t\t<div className={innerClasses.join(\" \")} style={innerStyle}>\r\n\t\t\t\t\t<ParentContext.Provider value={space.id}>\r\n\t\t\t\t\t\t<LayerContext.Provider value={undefined}>\r\n\t\t\t\t\t\t\t<DOMRectContext.Provider value={domRect}>{centeredContent}</DOMRectContext.Provider>\r\n\t\t\t\t\t\t</LayerContext.Provider>\r\n\t\t\t\t\t</ParentContext.Provider>\r\n\t\t\t\t</div>,\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","import { SizeUnit, Type, AnchorType, ResizeHandlePlacement } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps, IResizeHandleProps } from \"../core-react\";\r\n\r\nexport interface IResizableProps extends IReactSpaceCommonProps {\r\n\tsize: SizeUnit;\r\n\torder?: number;\r\n\thandleSize?: number;\r\n\ttouchHandleSize?: number;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const resizableProps = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tsize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t\torder: PropTypes.number,\r\n\t\thandleSize: PropTypes.number,\r\n\t\ttouchHandleSize: PropTypes.number,\r\n\t\thandlePlacement: PropTypes.oneOf([ResizeHandlePlacement.Inside, ResizeHandlePlacement.OverlayBoundary, ResizeHandlePlacement.OverlayInside]),\r\n\t\thandleRender: PropTypes.func,\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n\r\nexport interface IAnchorProps extends IResizableProps {\r\n\tresizable?: boolean;\r\n}\r\n\r\nexport const anchoredProps = {\r\n\t...resizableProps,\r\n\t...{\r\n\t\tresizable: PropTypes.bool,\r\n\t},\r\n};\r\n\r\nexport const LeftResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Left} position={{ left: 0, top: 0, bottom: 0, rightResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeftResizable.propTypes = resizableProps;\r\n\r\nexport const Left: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Left}\r\n\t\tposition={{ left: 0, top: 0, bottom: 0, rightResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeft.propTypes = anchoredProps;\r\n\r\nexport const TopResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Top} position={{ left: 0, top: 0, right: 0, bottomResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTopResizable.propTypes = resizableProps;\r\n\r\nexport const Top: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Top}\r\n\t\tposition={{ left: 0, top: 0, right: 0, bottomResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTop.propTypes = anchoredProps;\r\n\r\nexport const RightResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Right} position={{ bottom: 0, top: 0, right: 0, leftResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRightResizable.propTypes = resizableProps;\r\n\r\nexport const Right: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Right}\r\n\t\tposition={{ bottom: 0, top: 0, right: 0, leftResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRight.propTypes = anchoredProps;\r\n\r\nexport const BottomResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Bottom} position={{ bottom: 0, left: 0, right: 0, topResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottomResizable.propTypes = resizableProps;\r\n\r\nexport const Bottom: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Bottom}\r\n\t\tposition={{ bottom: 0, left: 0, right: 0, topResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottom.propTypes = anchoredProps;\r\n","import { Type, SizeUnit, IPositionalProps, AnchorType, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { IReactSpaceCommonProps } from \"../core-react\";\r\nimport { anchoredProps, IAnchorProps } from \"./Anchored\";\r\nimport { omit } from \"../core-utils\";\r\n\r\ntype ICustomProps = Omit<IReactSpaceCommonProps & IAnchorProps, \"size\"> & {\r\n\ttype?: Type;\r\n\r\n\t// Anchored\r\n\tanchor?: AnchorType;\r\n\tanchorSize?: SizeUnit;\r\n\r\n\t// Positioned\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n\tresizeTypes?: ResizeType[];\r\n};\r\n\r\nconst customProps = omit(\r\n\t{\r\n\t\t...anchoredProps,\r\n\t\t...{\r\n\t\t\ttype: PropTypes.oneOf([Type.Positioned, Type.Fill, Type.Anchored]),\r\n\r\n\t\t\tanchor: PropTypes.oneOf([AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom]),\r\n\t\t\tanchorSize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\r\n\t\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tresizeTypes: PropTypes.array,\r\n\t\t},\r\n\t},\r\n\t\"size\",\r\n);\r\n\r\nexport const Custom: React.FC<ICustomProps> = ({\r\n\tchildren,\r\n\ttype,\r\n\tleft,\r\n\ttop,\r\n\tright,\r\n\tbottom,\r\n\twidth,\r\n\theight,\r\n\tanchorSize,\r\n\tanchor,\r\n\tresizable,\r\n\tresizeTypes,\r\n\t...props\r\n}) => {\r\n\tlet position: IPositionalProps;\r\n\ttype = type || Type.Fill;\r\n\r\n\tif (type === Type.Positioned) {\r\n\t\tposition = {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top,\r\n\t\t\tright: right,\r\n\t\t\tbottom: bottom,\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tleftResizable: resizeTypes && (resizeTypes.includes(ResizeType.Left) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopResizable: resizeTypes && (resizeTypes.includes(ResizeType.Top) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\trightResizable: resizeTypes && (resizeTypes.includes(ResizeType.Right) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomResizable: resizeTypes && (resizeTypes.includes(ResizeType.Bottom) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopLeftResizable: resizeTypes && (resizeTypes.includes(ResizeType.TopLeft) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopRightResizable: resizeTypes && (resizeTypes.includes(ResizeType.TopRight) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomLeftResizable: resizeTypes && (resizeTypes.includes(ResizeType.BottomLeft) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomRightResizable: resizeTypes && (resizeTypes.includes(ResizeType.BottomRight) || resizeTypes.includes(ResizeType.All)),\r\n\t\t};\r\n\t} else {\r\n\t\tif (anchor === AnchorType.Left) {\r\n\t\t\tposition = { left: 0, top: 0, bottom: 0, width: anchorSize, rightResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\tposition = { right: 0, top: 0, bottom: 0, width: anchorSize, leftResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\tposition = { left: 0, top: 0, right: 0, height: anchorSize, bottomResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\tposition = { left: 0, bottom: 0, right: 0, height: anchorSize, topResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else {\r\n\t\t\tposition = {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t};\r\n\t\t\ttype = Type.Fill;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Space {...props} type={type} anchor={anchor} position={position}>\r\n\t\t\t{children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nCustom.propTypes = customProps;\r\n","import { Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\nexport const Fill: React.FC<IReactSpaceCommonProps> = (props) => (\r\n\t<Space {...props} type={Type.Fill} position={{ left: 0, top: 0, right: 0, bottom: 0 }}>\r\n\t\t{props.children}\r\n\t</Space>\r\n);\r\n\r\nFill.propTypes = commonProps;\r\n","import { SizeUnit, Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IFixedProps extends IReactSpaceCommonProps {\r\n\twidth?: SizeUnit;\r\n\theight: SizeUnit;\r\n}\r\n\r\nexport const Fixed: React.FC<IFixedProps> = ({ width, height, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.Fixed} position={{ width: width, height: height }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nFixed.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { LayerContext } from \"../core-react\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\ninterface IProps {\r\n\tzIndex: number;\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Layer: React.FC<IProps> = (props) => <LayerContext.Provider value={props.zIndex}>{props.children}</LayerContext.Provider>;\r\n\r\nLayer.propTypes = {\r\n\tzIndex: PropTypes.number.isRequired,\r\n};\r\n","import { Type, SizeUnit, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IPositionedProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n\twidth?: SizeUnit;\r\n\theight?: SizeUnit;\r\n\tresizable?: ResizeType[];\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const Positioned: React.FC<IPositionedProps> = ({ left, top, right, bottom, width, height, resizable, ...props }) => {\r\n\tconst resizeTypes = resizable || [];\r\n\r\n\treturn (\r\n\t\t<Space\r\n\t\t\t{...props}\r\n\t\t\ttype={Type.Positioned}\r\n\t\t\tposition={{\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top,\r\n\t\t\t\tright: right,\r\n\t\t\t\tbottom: bottom,\r\n\t\t\t\tleftResizable: resizeTypes.includes(ResizeType.Left) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopResizable: resizeTypes.includes(ResizeType.Top) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\trightResizable: resizeTypes.includes(ResizeType.Right) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomResizable: resizeTypes.includes(ResizeType.Bottom) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopLeftResizable: resizeTypes.includes(ResizeType.TopLeft) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopRightResizable: resizeTypes.includes(ResizeType.TopRight) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomLeftResizable: resizeTypes.includes(ResizeType.BottomLeft) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomRightResizable: resizeTypes.includes(ResizeType.BottomRight) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height,\r\n\t\t\t}}>\r\n\t\t\t{props.children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nPositioned.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizable: PropTypes.array,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { DOMRectContext } from \"../core-react\";\r\n\r\ninterface ISpaceInfoProps {\r\n\tchildren: (info: DOMRect) => JSX.Element;\r\n}\r\n\r\n/**\r\n * @deprecated use useCurrentSpace() hook instead\r\n */\r\nexport const Info: React.FC<ISpaceInfoProps> = (props) => {\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\r\n\tif (domRect) {\r\n\t\treturn props.children(domRect);\r\n\t}\r\n\r\n\treturn props.children({ left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" });\r\n};\r\n","import { Type, SizeUnit } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IViewPortProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n}\r\n\r\nexport const ViewPort: React.FC<IViewPortProps> = ({ left, top, right, bottom, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.ViewPort} position={{ left: left || 0, top: top || 0, right: right || 0, bottom: bottom || 0 }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nViewPort.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t},\r\n};\r\n","import * as React from \"react\";\nimport { enabledSsrSupport } from \"../core-react\";\nimport css from \"../styles.css\";\n\nexport const SSR: React.FC<{ children?: React.ReactNode }> = ({ children }) => {\n\tenabledSsrSupport();\n\treturn (\n\t\t<>\n\t\t\t<style dangerouslySetInnerHTML={{ __html: css }} />\n\t\t\t{children}\n\t\t</>\n\t);\n};\n","import * as React from \"react\";\r\nimport { IReactSpacesOptions, OptionsContext } from \"../core-react\";\r\n\r\ninterface IProps extends IReactSpacesOptions {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Options: React.FC<IProps> = ({ children, ...opts }) => {\r\n\treturn <OptionsContext.Provider value={opts}>{children}</OptionsContext.Provider>;\r\n};\r\n"],"names":["css"],"mappings":"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"}