{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/core-types.ts","../src/core-utils.ts","../src/core-resizing.ts","../src/core-dragging.ts","../src/core.ts","../src/core-react.ts","../src/components/Centered.tsx","../src/components/CenteredVertically.tsx","../src/components/Space.tsx","../src/components/Anchored.tsx","../src/components/Custom.tsx","../src/components/Fill.tsx","../src/components/Fixed.tsx","../src/components/Layer.tsx","../src/components/Positioned.tsx","../src/components/SpaceInfo.tsx","../src/components/ViewPort.tsx","../src/components/SSR.tsx","../src/components/Options.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export type ResizeMouseEvent = React.MouseEvent<HTMLElement, MouseEvent>;\r\nexport type ResizeTouchEvent = React.TouchEvent<HTMLElement>;\r\nexport type OnResizeStart = ((resizeType?: ResizeType) => void | boolean) | undefined;\r\nexport type OnResizeEnd = ((newSize: SizeUnit, domRect: DOMRect, resizeType?: ResizeType) => void) | undefined;\r\nexport type OnDragEnd = (position: IPosition, moved: boolean) => void;\r\n\r\nexport enum Type {\r\n\tViewPort = \"viewport\",\r\n\tFixed = \"fixed\",\r\n\tFill = \"fill\",\r\n\tPositioned = \"positioned\",\r\n\tAnchored = \"anchored\",\r\n\tCustom = \"custom\",\r\n}\r\n\r\nexport enum AnchorType {\r\n\tLeft = \"anchor-left\",\r\n\tRight = \"anchor-right\",\r\n\tTop = \"anchor-top\",\r\n\tBottom = \"anchor-bottom\",\r\n}\r\n\r\nexport enum Orientation {\r\n\tHorizontal,\r\n\tVertical,\r\n}\r\n\r\nexport type SizeUnit = number | string | undefined;\r\n\r\nexport enum ResizeType {\r\n\tAll = \"resize-all\",\r\n\tLeft = \"resize-left\",\r\n\tRight = \"resize-right\",\r\n\tTop = \"resize-top\",\r\n\tBottom = \"resize-bottom\",\r\n\tTopLeft = \"resize-topleft\",\r\n\tTopRight = \"resize-topright\",\r\n\tBottomLeft = \"resize-bottomleft\",\r\n\tBottomRight = \"resize-bottomright\",\r\n}\r\n\r\nexport enum ResizeHandlePlacement {\r\n\tOverlayInside = \"overlay-inside\",\r\n\tInside = \"inside\",\r\n\tOverlayBoundary = \"overlay-boundary\",\r\n}\r\n\r\nexport enum CenterType {\r\n\tNone = \"none\",\r\n\tVertical = \"vertical\",\r\n\tHorizontalVertical = \"horizontalVertical\",\r\n}\r\n\r\nexport enum MoveEvent {\r\n\tMouse = \"mousemove\",\r\n\tTouch = \"touchmove\",\r\n}\r\n\r\nexport enum EndEvent {\r\n\tMouse = \"mouseup\",\r\n\tTouch = \"touchend\",\r\n}\r\n\r\nexport interface ICommonProps {\r\n\tid?: string;\r\n\tclassName?: string;\r\n\tcenterContent?: CenterType;\r\n\tzIndex?: number;\r\n\tscrollable?: boolean;\r\n\ttrackSize?: boolean;\r\n\tallowOverflow?: boolean;\r\n}\r\n\r\nexport interface ISpaceProps extends ICommonProps {\r\n\ttype: Type;\r\n\tanchor?: AnchorType | undefined;\r\n\torder?: number | undefined;\r\n\tposition?: IPositionalProps | undefined;\r\n\thandleSize?: number | undefined;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\ttouchHandleSize?: number | undefined;\r\n\tminimumSize?: number | undefined;\r\n\tmaximumSize?: number | undefined;\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n}\r\n\r\nexport interface ISpaceStore {\r\n\tgetSpaces: () => ISpaceDefinition[];\r\n\tgetSpace: (id: string) => ISpaceDefinition | undefined;\r\n\taddSpace: (space: ISpaceDefinition) => void;\r\n\tupdateSpace: (space: ISpaceDefinition, props: ISpaceProps) => void;\r\n\tupdateStyles: (space: ISpaceDefinition) => void;\r\n\tremoveSpace: (space: ISpaceDefinition) => void;\r\n\tcreateSpace: (parent: string | undefined, props: ISpaceProps, update: () => void) => ISpaceDefinition;\r\n\tstartMouseResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.MouseEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartTouchResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.TouchEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartMouseDrag: (space: ISpaceDefinition, event: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (space: ISpaceDefinition, event: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n}\r\n\r\nexport interface IPosition {\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n}\r\n\r\nexport interface IPositionalProps extends IPosition {\r\n\tleftResizable?: boolean;\r\n\ttopResizable?: boolean;\r\n\trightResizable?: boolean;\r\n\tbottomResizable?: boolean;\r\n\ttopLeftResizable?: boolean;\r\n\ttopRightResizable?: boolean;\r\n\tbottomLeftResizable?: boolean;\r\n\tbottomRightResizable?: boolean;\r\n}\r\n\r\nexport interface ISize {\r\n\tsize: SizeUnit;\r\n\tadjusted: SizeUnit[];\r\n\tresized: number;\r\n}\r\n\r\nexport interface ISpaceDefinition {\r\n\tupdate: () => void;\r\n\tupdateParent: () => void;\r\n\tadjustLeft: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustRight: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustTop: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustBottom: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustEdge: (adjusted: SizeUnit[]) => boolean;\r\n\tanchoredChildren: (children: ISpaceDefinition[], anchor: AnchorType, zIndex: number) => ISpaceDefinition[];\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n\telement: HTMLElement;\r\n\tid: string;\r\n\ttype: Type;\r\n\tanchor?: AnchorType;\r\n\torientation: Orientation;\r\n\tscrollable: boolean;\r\n\torder?: number;\r\n\tposition: \"fixed\" | \"absolute\" | \"relative\";\r\n\tchildren: ISpaceDefinition[];\r\n\tparentId: string | undefined;\r\n\tstore: ISpaceStore;\r\n\tleft: ISize;\r\n\ttop: ISize;\r\n\tright: ISize;\r\n\tbottom: ISize;\r\n\twidth: ISize;\r\n\theight: ISize;\r\n\tzIndex: number;\r\n\tdimension: DOMRect;\r\n\tcenterContent: \"none\" | \"vertical\" | \"horizontalVertical\";\r\n\tresizing: boolean;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\thandleSize: number;\r\n\ttouchHandleSize: number;\r\n\thandlePlacement: ResizeHandlePlacement;\r\n\tcanResizeTop: boolean;\r\n\tcanResizeLeft: boolean;\r\n\tcanResizeRight: boolean;\r\n\tcanResizeBottom: boolean;\r\n\tcanResizeTopLeft: boolean;\r\n\tcanResizeTopRight: boolean;\r\n\tcanResizeBottomLeft: boolean;\r\n\tcanResizeBottomRight: boolean;\r\n\tallowOverflow: boolean;\r\n\tssrStyle: string;\r\n}\r\n\r\nexport interface ISpaceContext {\r\n\tsize: DOMRect;\r\n\tlayer: number;\r\n\tstartMouseDrag: (e: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (e: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n\tforceUpdate: () => void;\r\n\tssrStyle?: string;\r\n}\r\n","import { ISpaceDefinition, SizeUnit, ISize, ResizeHandlePlacement, Type, Orientation } from \"./core-types\";\r\n\r\nexport function omit<K extends string, T extends Record<K, unknown>>(object: T, ...keys: K[]): Omit<T, K> {\r\n\tconst keySet = Object.create(null) as Record<K, true>;\r\n\tkeys.forEach((key) => {\r\n\t\tkeySet[key] = true;\r\n\t});\r\n\r\n\tconst result = Object.create(null) as Omit<T, K>;\r\n\tObject.keys(object).forEach((key) => {\r\n\t\tif (!keySet[key]) {\r\n\t\t\tresult[key] = object[key];\r\n\t\t}\r\n\t});\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function shortuuid() {\r\n\tlet firstPart = (Math.random() * 46656) | 0;\r\n\tlet secondPart = (Math.random() * 46656) | 0;\r\n\treturn (\"000\" + firstPart.toString(36)).slice(-3) + (\"000\" + secondPart.toString(36)).slice(-3);\r\n}\r\n\r\nexport function getSizeString(size: SizeUnit) {\r\n\treturn typeof size === \"string\" ? size : `${size}px`;\r\n}\r\n\r\nexport function css(size: ISize, dontAddCalc?: boolean) {\r\n\tif (size.size === 0 && size.adjusted.length === 0 && size.resized === 0) {\r\n\t\treturn `0px`;\r\n\t}\r\n\r\n\tconst parts: string[] = [];\r\n\tif (size.size !== undefined) {\r\n\t\tparts.push(getSizeString(size.size));\r\n\t}\r\n\r\n\tsize.adjusted.forEach((l) => parts.push(getSizeString(l)));\r\n\r\n\tif (size.resized !== 0) {\r\n\t\tparts.push(getSizeString(size.resized));\r\n\t}\r\n\r\n\tif (parts.length === 0) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tif (parts.length === 1) {\r\n\t\treturn parts[0];\r\n\t}\r\n\r\n\tif (dontAddCalc) {\r\n\t\treturn parts.join(\" + \");\r\n\t}\r\n\r\n\treturn `calc(${parts.join(\" + \")})`;\r\n}\r\n\r\nexport function coalesce<T>(...args: T[]) {\r\n\treturn args.find((x) => x !== null && x !== undefined);\r\n}\r\n\r\nexport function adjustmentsEqual(item1: SizeUnit[], item2: SizeUnit[]) {\r\n\tif (item1.length !== item2.length) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (var i = 0, len = item1.length; i < len; i++) {\r\n\t\tif (item1[i] !== item2[i]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function throttle<F extends (...args: any) => any>(callback: F, limit: number) {\r\n\tvar wait = false; // Initially, we're not waiting\r\n\treturn function(...args: any) {\r\n\t\t// We return a throttled function\r\n\t\tif (!wait) {\r\n\t\t\t// If we're not waiting\r\n\t\t\tcallback(...args); // Execute users function\r\n\t\t\twait = true; // Prevent future invocations\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t// After a period of time\r\n\t\t\t\twait = false; // And allow future invocations\r\n\t\t\t}, limit);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function styleDefinition(space: ISpaceDefinition) {\r\n\tconst cssElements: string[] = [];\r\n\r\n\tconst style: React.CSSProperties = {\r\n\t\tposition: space.position,\r\n\t\tleft: css(space.left),\r\n\t\ttop: css(space.top),\r\n\t\tright: css(space.right),\r\n\t\tbottom: css(space.bottom),\r\n\t\twidth: css(space.width),\r\n\t\theight: css(space.height),\r\n\t\tzIndex: space.zIndex,\r\n\t};\r\n\r\n\tconst cssString: string[] = [];\r\n\r\n\tif (style.position) {\r\n\t\tcssString.push(`position: ${style.position};`);\r\n\t}\r\n\tif (style.left) {\r\n\t\tcssString.push(`left: ${style.left};`);\r\n\t}\r\n\tif (style.top) {\r\n\t\tcssString.push(`top: ${style.top};`);\r\n\t}\r\n\tif (style.right) {\r\n\t\tcssString.push(`right: ${style.right};`);\r\n\t}\r\n\tif (style.bottom) {\r\n\t\tcssString.push(`bottom: ${style.bottom};`);\r\n\t}\r\n\tif (style.width) {\r\n\t\tcssString.push(`width: ${style.width};`);\r\n\t}\r\n\tif (style.height) {\r\n\t\tcssString.push(`height: ${style.height};`);\r\n\t}\r\n\tif (style.zIndex) {\r\n\t\tcssString.push(`z-index: ${style.zIndex};`);\r\n\t}\r\n\tif (space.allowOverflow) {\r\n\t\tcssString.push(\"overflow: visible;\");\r\n\t}\r\n\r\n\tif (cssString.length > 0) {\r\n\t\tcssElements.push(`#${space.id} { ${cssString.join(\" \")} }`);\r\n\t}\r\n\r\n\tif (space.scrollable) {\r\n\t\tcssElements.push(`#${space.id} > .spaces-space-inner { overflow: auto; touch-action: auto; }`);\r\n\t}\r\n\r\n\tlet nhandleOffset = 0;\r\n\tconst handleSize = `${space.handleSize}px`;\r\n\tconst touchHandleSize = `-${space.touchHandleSize / 2 - space.handleSize / 2}px`;\r\n\tconst negativeTouchHandleSize = `${space.touchHandleSize / 2 - space.handleSize / 2}px`;\r\n\r\n\tswitch (space.handlePlacement) {\r\n\t\tcase ResizeHandlePlacement.Inside:\r\n\t\tcase ResizeHandlePlacement.OverlayInside:\r\n\t\t\tnhandleOffset = space.handleSize;\r\n\t\t\tif (space.type === Type.Positioned) {\r\n\t\t\t\tnhandleOffset = 0;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ResizeHandlePlacement.OverlayBoundary:\r\n\t\t\tnhandleOffset = space.handleSize / 2;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tconst handleOffset = `${nhandleOffset}px`;\r\n\r\n\tconst addHandleCss = (id: string, pos: { left?: string; top?: string; right?: string; bottom?: string; width?: string; height?: string }) => {\r\n\t\tconst styles: string[] = [];\r\n\r\n\t\tif (pos.left) styles.push(`left: ${pos.left}`);\r\n\t\tif (pos.top) styles.push(`top: ${pos.top}`);\r\n\t\tif (pos.right) styles.push(`right: ${pos.right}`);\r\n\t\tif (pos.bottom) styles.push(`bottom: ${pos.bottom}`);\r\n\t\tif (pos.width) styles.push(`width: ${pos.width}`);\r\n\t\tif (pos.height) styles.push(`height: ${pos.height}`);\r\n\r\n\t\tcssElements.push(`#${space.id}-${id} { ${styles.join(\"; \")}}`);\r\n\t};\r\n\r\n\tconst widthOrHeightSpecified = () =>\r\n\t\tspace.type === Type.Positioned\r\n\t\t\t? space.width.size && space.height.size\r\n\t\t\t: space.orientation == Orientation.Horizontal\r\n\t\t\t? space.width.size\r\n\t\t\t: space.height.size;\r\n\r\n\tif (space.canResizeLeft) {\r\n\t\tif (space.anchor) {\r\n\t\t\taddHandleCss(\"ml\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} + ${css(space.width)} - ${handleOffset})`,\r\n\t\t\t\ttop: `0`,\r\n\t\t\t\tbottom: `0`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"ml\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"ml:after\", {\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTop) {\r\n\t\tif (space.anchor) {\r\n\t\t\taddHandleCss(\"mt\", {\r\n\t\t\t\tleft: `0`,\r\n\t\t\t\tright: `0`,\r\n\t\t\t\tbottom: `calc(${css(space.bottom)} + ${css(space.height)} - ${handleOffset})`,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\tright: touchHandleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mt\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t\tif (widthOrHeightSpecified()) {\r\n\t\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\t\twidth: `calc(${css(space.width, true)} - ${handleOffset}) + ${negativeTouchHandleSize}`,\r\n\t\t\t\t\tright: touchHandleSize,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\taddHandleCss(\"mt:after\", {\r\n\t\t\t\t\ttop: touchHandleSize,\r\n\t\t\t\t\tbottom: touchHandleSize,\r\n\t\t\t\t\tleft: touchHandleSize,\r\n\t\t\t\t\twidth: css(space.width),\r\n\t\t\t\t\tright: touchHandleSize,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (space.canResizeRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\tbottom: css(space.bottom),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: css(space.height),\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mr:after\", {\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottom) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mb\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mb\", {\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\tright: css(space.right),\r\n\t\t\t\twidth: css(space.width),\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mb:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTopLeft) {\r\n\t\taddHandleCss(\"mtl\", {\r\n\t\t\tleft: `calc(${css(space.left, true)} - ${handleOffset})`,\r\n\t\t\ttop: css(space.top),\r\n\t\t\twidth: handleSize,\r\n\t\t\theight: handleSize,\r\n\t\t});\r\n\t\taddHandleCss(\"mtl:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTopRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mtr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mtr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\ttop: css(space.top),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mtr:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottomLeft) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mbl\", {\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mbl\", {\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\tleft: css(space.left),\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mbl:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottomRight) {\r\n\t\tif (widthOrHeightSpecified()) {\r\n\t\t\taddHandleCss(\"mbr\", {\r\n\t\t\t\tleft: `calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\ttop: `calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleSize} + ${handleOffset})`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taddHandleCss(\"mbr\", {\r\n\t\t\t\tright: `calc(${css(space.right, true)} - ${handleOffset})`,\r\n\t\t\t\tbottom: `calc(${css(space.bottom, true)} - ${handleOffset})`,\r\n\t\t\t\twidth: handleSize,\r\n\t\t\t\theight: handleSize,\r\n\t\t\t});\r\n\t\t}\r\n\t\taddHandleCss(\"mbr:after\", {\r\n\t\t\ttop: touchHandleSize,\r\n\t\t\tbottom: touchHandleSize,\r\n\t\t\tleft: touchHandleSize,\r\n\t\t\tright: touchHandleSize,\r\n\t\t});\r\n\t}\r\n\r\n\treturn cssElements.join(\" \");\r\n}\r\n\r\nexport function updateStyleDefinition(space: ISpaceDefinition) {\r\n\tconst definition = styleDefinition(space);\r\n\tif (!isServer()) {\r\n\t\tconst existing = document.getElementById(`style_${space.id}`);\r\n\t\tif (existing) {\r\n\t\t\tif (existing.innerHTML !== definition) {\r\n\t\t\t\texisting.innerHTML = definition;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst newStyle = document.createElement(\"style\");\r\n\t\t\tnewStyle.id = `style_${space.id}`;\r\n\t\t\tnewStyle.innerHTML = definition;\r\n\t\t\tdocument.head.appendChild(newStyle);\r\n\t\t}\r\n\t} else {\r\n\t\tspace.ssrStyle = definition;\r\n\t}\r\n}\r\n\r\nexport function removeStyleDefinition(space: ISpaceDefinition) {\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\tif (existing) {\r\n\t\tdocument.head.removeChild(existing);\r\n\t}\r\n}\r\n\r\nexport function isServer() {\r\n\tif (typeof document !== \"undefined\") {\r\n\t\tif (document) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n","import { SyntheticEvent } from \"react\";\r\nimport { ISpaceDefinition, ResizeType, ISpaceStore, OnResizeEnd, EndEvent, MoveEvent, Type, ISize } from \"./core-types\";\r\nimport { coalesce, throttle } from \"./core-utils\";\r\n\r\nconst RESIZE_THROTTLE = 0;\r\n\r\nexport interface IResizeChange {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nfunction isHorizontal(resizeType: ResizeType) {\r\n\treturn resizeType === ResizeType.Left || resizeType === ResizeType.Right;\r\n}\r\n\r\ntype ResizeAdjuster = (currentX: number, currentY: number) => void;\r\n\r\nfunction createSideAdjuster(\r\n\trect: DOMRect,\r\n\tresizeType: ResizeType,\r\n\tdimensionToAdjust: ISize,\r\n\tspace: ISpaceDefinition,\r\n\toriginalX: number,\r\n\toriginalY: number,\r\n): ResizeAdjuster {\r\n\tconst negater = resizeType === ResizeType.Right || resizeType === ResizeType.Bottom ? (val: number) => -val : (val: number) => val;\r\n\r\n\tconst candidateOppositeDimensionToAdjust = isHorizontal(resizeType) ? space.width : space.height;\r\n\r\n\tconst offset1 = dimensionToAdjust.resized;\r\n\tconst offset2 = candidateOppositeDimensionToAdjust.resized;\r\n\r\n\tconst size = isHorizontal(resizeType) ? rect.width : rect.height;\r\n\tconst minimumAdjust = coalesce(space.minimumSize, 20)! - size + 0;\r\n\tconst maximumAdjust = space.maximumSize ? space.maximumSize - size + 0 : undefined;\r\n\r\n\treturn (currentX: number, currentY: number) => {\r\n\t\tlet adjustment = (isHorizontal(resizeType) ? originalX : originalY) - (isHorizontal(resizeType) ? currentX : currentY);\r\n\t\tlet dimensionResized = negater(adjustment);\r\n\r\n\t\tif (space.type !== Type.Positioned) {\r\n\t\t\tdimensionResized = Math.max(negater(adjustment), minimumAdjust);\r\n\r\n\t\t\tif (dimensionResized < minimumAdjust) {\r\n\t\t\t\tdimensionResized = minimumAdjust;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof maximumAdjust === \"number\") {\r\n\t\t\t\tif (dimensionResized > maximumAdjust) {\r\n\t\t\t\t\tdimensionResized = maximumAdjust;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dimensionToAdjust.size !== undefined) {\r\n\t\t\tdimensionToAdjust.resized = negater(-adjustment) + offset1;\r\n\t\t\tif (candidateOppositeDimensionToAdjust.size) {\r\n\t\t\t\tcandidateOppositeDimensionToAdjust.resized = negater(adjustment) + offset2;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcandidateOppositeDimensionToAdjust.resized = dimensionResized + offset2;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction createAdjuster(resizeType: ResizeType, space: ISpaceDefinition, originalX: number, originalY: number): ResizeAdjuster {\r\n\tconst rect = space.element.getBoundingClientRect();\r\n\tswitch (resizeType) {\r\n\t\tcase ResizeType.Left:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.left, space, originalX, originalY);\r\n\t\tcase ResizeType.Right:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.right, space, originalX, originalY);\r\n\t\tcase ResizeType.Bottom:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.bottom, space, originalX, originalY);\r\n\t\tcase ResizeType.Top:\r\n\t\t\treturn createSideAdjuster(rect, resizeType, space.top, space, originalX, originalY);\r\n\t\tcase ResizeType.TopLeft:\r\n\t\t\tconst topAdjuster = createSideAdjuster(rect, ResizeType.Top, space.top, space, originalX, originalY);\r\n\t\t\tconst leftAdjuster = createSideAdjuster(rect, ResizeType.Left, space.left, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\ttopAdjuster(x, y);\r\n\t\t\t\tleftAdjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.TopRight:\r\n\t\t\tconst top1Adjuster = createSideAdjuster(rect, ResizeType.Top, space.top, space, originalX, originalY);\r\n\t\t\tconst rightAdjuster = createSideAdjuster(rect, ResizeType.Right, space.right, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\ttop1Adjuster(x, y);\r\n\t\t\t\trightAdjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.BottomLeft:\r\n\t\t\tconst bottomAdjuster = createSideAdjuster(rect, ResizeType.Bottom, space.bottom, space, originalX, originalY);\r\n\t\t\tconst left1Adjuster = createSideAdjuster(rect, ResizeType.Left, space.left, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\tbottomAdjuster(x, y);\r\n\t\t\t\tleft1Adjuster(x, y);\r\n\t\t\t};\r\n\t\tcase ResizeType.BottomRight:\r\n\t\t\tconst bottom1Adjuster = createSideAdjuster(rect, ResizeType.Bottom, space.bottom, space, originalX, originalY);\r\n\t\t\tconst right1Adjuster = createSideAdjuster(rect, ResizeType.Right, space.right, space, originalX, originalY);\r\n\t\t\treturn (x, y) => {\r\n\t\t\t\tbottom1Adjuster(x, y);\r\n\t\t\t\tright1Adjuster(x, y);\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\tthrow `Resize type ${resizeType} not supported`;\r\n\t}\r\n}\r\n\r\nexport function createResize(store: ISpaceStore) {\r\n\treturn {\r\n\t\tstartResize<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\r\n\t\t\te: T,\r\n\t\t\tresizeType: ResizeType,\r\n\t\t\tspace: ISpaceDefinition,\r\n\t\t\tendEvent: EndEvent,\r\n\t\t\tmoveEvent: MoveEvent,\r\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\r\n\t\t\tonResizeEnd?: OnResizeEnd,\r\n\t\t) {\r\n\t\t\tif (space.onResizeStart) {\r\n\t\t\t\tconst result = space.onResizeStart(resizeType);\r\n\t\t\t\tif (typeof result === \"boolean\" && !result) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst originalCoords = getCoords(e);\r\n\t\t\tconst adjuster = createAdjuster(resizeType, space, originalCoords.x, originalCoords.y);\r\n\r\n\t\t\tspace.resizing = true;\r\n\t\t\tspace.updateParent();\r\n\r\n\t\t\tlet lastX = 0;\r\n\t\t\tlet lastY = 0;\r\n\t\t\tlet moved = false;\r\n\r\n\t\t\tconst resize = (currentX: number, currentY: number) => {\r\n\t\t\t\tadjuster(currentX, currentY);\r\n\t\t\t\tstore.updateStyles(space);\r\n\t\t\t};\r\n\r\n\t\t\tconst withPreventDefault = (e: T) => {\r\n\t\t\t\tmoved = true;\r\n\t\t\t\tconst newCoords = getCoords(e);\r\n\t\t\t\tlastX = newCoords.x;\r\n\t\t\t\tlastY = newCoords.y;\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif (RESIZE_THROTTLE > 0) {\r\n\t\t\t\t\tthrottle(\r\n\t\t\t\t\t\t(x, y) =>\r\n\t\t\t\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\t\t\t\tif (space.resizing) {\r\n\t\t\t\t\t\t\t\t\tresize(x, y);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tRESIZE_THROTTLE,\r\n\t\t\t\t\t)(lastX, lastY);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\t\t\tif (space.resizing) {\r\n\t\t\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst removeListener = () => {\r\n\t\t\t\tspace.resizing = false;\r\n\r\n\t\t\t\tif (moved) {\r\n\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\t\twindow.removeEventListener(endEvent, removeListener);\r\n\t\t\t\tspace.updateParent();\r\n\r\n\t\t\t\tconst resizeEnd = onResizeEnd || space.onResizeEnd;\r\n\t\t\t\tif (resizeEnd) {\r\n\t\t\t\t\tconst currentRect = space.element.getBoundingClientRect();\r\n\t\t\t\t\tresizeEnd(Math.floor(isHorizontal(resizeType) ? currentRect.width : currentRect.height), currentRect as DOMRect, resizeType);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\twindow.addEventListener(endEvent, removeListener);\r\n\t\t},\r\n\t};\r\n}\r\n","import { SyntheticEvent } from \"react\";\nimport { ISpaceDefinition, ISpaceStore, EndEvent, MoveEvent, OnDragEnd } from \"./core-types\";\nimport { throttle } from \"./core-utils\";\n\nexport function createDrag(store: ISpaceStore) {\n\tfunction onMove(space: ISpaceDefinition, originalX: number, originalY: number, x: number, y: number) {\n\t\tconst adjustmentX = -(originalX - x);\n\t\tconst adjustmentY = -(originalY - y);\n\n\t\tspace.left.adjusted = [adjustmentX];\n\t\tspace.top.adjusted = [adjustmentY];\n\n\t\tif (space.right.size) {\n\t\t\tspace.right.adjusted = [-adjustmentX];\n\t\t}\n\n\t\tif (space.bottom.size) {\n\t\t\tspace.bottom.adjusted = [-adjustmentY];\n\t\t}\n\n\t\tstore.updateStyles(space);\n\t}\n\n\treturn {\n\t\tstartDrag<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\n\t\t\te: T,\n\t\t\tspace: ISpaceDefinition,\n\t\t\tendEvent: EndEvent,\n\t\t\tmoveEvent: MoveEvent,\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\n\t\t\tonDragEnd?: OnDragEnd,\n\t\t) {\n\t\t\tif (space.element) {\n\t\t\t\tconst coords = getCoords(e);\n\t\t\t\tconst adjustedLeft = space.left.adjusted.length === 0 ? 0 : (space.left.adjusted[0] as number);\n\t\t\t\tconst adjustedTop = space.top.adjusted.length === 0 ? 0 : (space.top.adjusted[0] as number);\n\t\t\t\tconst originalMouseX = coords.x - adjustedLeft;\n\t\t\t\tconst originalMouseY = coords.y - adjustedTop;\n\t\t\t\tlet lastX = 0;\n\t\t\t\tlet lastY = 0;\n\t\t\t\tlet moved = false;\n\n\t\t\t\tconst mouseMove = (x: number, y: number) => onMove(space, originalMouseX, originalMouseY, x, y);\n\t\t\t\tconst throttledMouseMove = throttle<typeof mouseMove>(mouseMove, 5);\n\n\t\t\t\tconst withPreventDefault = (e: T) => {\n\t\t\t\t\tmoved = true;\n\t\t\t\t\tconst newCoords = getCoords(e);\n\t\t\t\t\tlastX = newCoords.x;\n\t\t\t\t\tlastY = newCoords.y;\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tthrottledMouseMove(lastX, lastY);\n\t\t\t\t};\n\n\t\t\t\tconst removeListener = () => {\n\t\t\t\t\tif (moved) {\n\t\t\t\t\t\tmouseMove(lastX, lastY);\n\t\t\t\t\t}\n\t\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\t\twindow.removeEventListener(endEvent, removeListener);\n\n\t\t\t\t\tif (onDragEnd) {\n\t\t\t\t\t\tconst parentInfo = (space.parentId && store.getSpace(space.parentId)?.element.getBoundingClientRect()) || {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst info = (({ left, top, right, bottom, width, height }) => ({ left, top, right, bottom, width, height }))(\n\t\t\t\t\t\t\tspace.element.getBoundingClientRect(),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tonDragEnd(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tleft: info.left - parentInfo.left,\n\t\t\t\t\t\t\t\t\ttop: info.top - parentInfo.top,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmoved,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\twindow.addEventListener(endEvent, removeListener);\n\t\t\t}\n\t\t},\n\t};\n}\n","import {\r\n\tISpaceDefinition,\r\n\tSizeUnit,\r\n\tAnchorType,\r\n\tType,\r\n\tOrientation,\r\n\tEndEvent,\r\n\tMoveEvent,\r\n\tISpaceStore,\r\n\tISpaceProps,\r\n\tCenterType,\r\n\tResizeHandlePlacement,\r\n} from \"./core-types\";\r\nimport { createResize } from \"./core-resizing\";\r\nimport { updateStyleDefinition, removeStyleDefinition, coalesce, adjustmentsEqual } from \"./core-utils\";\r\nimport { createDrag } from \"./core-dragging\";\r\n\r\nconst spaceDefaults: Partial<ISpaceDefinition> = {\r\n\tid: \"\",\r\n\tzIndex: 0,\r\n\tscrollable: false,\r\n\tresizing: false,\r\n\tallowOverflow: false,\r\n\tcenterContent: \"none\",\r\n\tdimension: { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" },\r\n\thandleSize: 5,\r\n\ttouchHandleSize: 5,\r\n\thandlePlacement: ResizeHandlePlacement.OverlayInside,\r\n\tadjustLeft: () => false,\r\n\tadjustRight: () => false,\r\n\tadjustTop: () => false,\r\n\tadjustBottom: () => false,\r\n\tadjustEdge: () => false,\r\n\tanchoredChildren: () => [],\r\n};\r\n\r\nconst anchorTypes = [AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom];\r\n\r\nfunction getPosition(type: Type) {\r\n\tif (type === Type.ViewPort) {\r\n\t\treturn \"fixed\";\r\n\t}\r\n\tif (type === Type.Fixed) {\r\n\t\treturn \"relative\";\r\n\t}\r\n\treturn \"absolute\";\r\n}\r\n\r\nfunction getOrientation(anchor: AnchorType | undefined) {\r\n\treturn anchor === AnchorType.Bottom || anchor === AnchorType.Top ? Orientation.Vertical : Orientation.Horizontal;\r\n}\r\n\r\nfunction anchorUpdates(space: ISpaceDefinition) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Left,\r\n\t\t\tupdate: space.adjustLeft,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Top,\r\n\t\t\tupdate: space.adjustTop,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Right,\r\n\t\t\tupdate: space.adjustRight,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Bottom,\r\n\t\t\tupdate: space.adjustBottom,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction sizeInfoDefault(size: SizeUnit) {\r\n\treturn { size: size, adjusted: [], resized: 0 };\r\n}\r\n\r\nexport function createStore(): ISpaceStore {\r\n\tlet spaces: ISpaceDefinition[] = [];\r\n\r\n\tconst setSpaces = (newSpaces: ISpaceDefinition[]) => {\r\n\t\tspaces = newSpaces;\r\n\t};\r\n\r\n\tconst getSpace = (id: string) => {\r\n\t\treturn getSpaces().find((s) => s.id === id);\r\n\t};\r\n\r\n\tconst getSpaces = () => spaces;\r\n\r\n\tconst recalcSpaces = (parent: ISpaceDefinition) => {\r\n\t\tconst onlyUnique = (value: number, index: number, self: number[]) => {\r\n\t\t\treturn self.indexOf(value) === index;\r\n\t\t};\r\n\r\n\t\tconst addDefaultOrders = (spaces: ISpaceDefinition[]) => {\r\n\t\t\tlet result: ISpaceDefinition[] = [];\r\n\r\n\t\t\tanchorTypes.forEach((t) => {\r\n\t\t\t\tconst anchoredSpaces = spaces.filter((s) => s.anchor !== undefined && s.anchor === t);\r\n\t\t\t\tconst zIndices = anchoredSpaces.map((s) => s.zIndex).filter(onlyUnique);\r\n\t\t\t\tzIndices.forEach((i) => {\r\n\t\t\t\t\tconst anchoredSpacesInLayer = anchoredSpaces.filter((s) => s.zIndex === i);\r\n\t\t\t\t\tconst orderedSpaces = anchoredSpacesInLayer.filter((c) => c.order !== undefined);\r\n\t\t\t\t\tconst unorderedSpaces = anchoredSpacesInLayer.filter((c) => c.order === undefined);\r\n\t\t\t\t\tvar maxOrder = orderedSpaces.length > 0 ? orderedSpaces.map((a) => a.order!).reduce((a, b) => Math.max(a, b)) : 0;\r\n\t\t\t\t\tresult = [...result, ...[...orderedSpaces, ...unorderedSpaces.map((c, idx) => ({ ...c, ...{ order: maxOrder + idx + 1 } }))]];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn [...result, ...spaces.filter((s) => s.anchor === undefined)];\r\n\t\t};\r\n\r\n\t\tconst orderedSpaces = addDefaultOrders(parent.children);\r\n\t\tfor (var i = 0, len = orderedSpaces.length; i < len; i++) {\r\n\t\t\tconst space = orderedSpaces[i];\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type === Type.Fill) {\r\n\t\t\t\tanchorUpdates(space).forEach((info) => {\r\n\t\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\t\tconst anchoredSpaces = parent.anchoredChildren(orderedSpaces, info.anchor, space.zIndex);\r\n\r\n\t\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (info.update(adjusted)) {\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (space.type === Type.Anchored) {\r\n\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\tconst anchoredSpaces = parent\r\n\t\t\t\t\t.anchoredChildren(orderedSpaces, space.anchor!, space.zIndex)\r\n\t\t\t\t\t.filter((s) => s.id !== space.id && s.order! <= space.order!);\r\n\r\n\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (space.adjustEdge(adjusted)) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst store: ISpaceStore = {\r\n\t\tgetSpaces: getSpaces,\r\n\t\tgetSpace: getSpace,\r\n\t\taddSpace: (space) => {\r\n\t\t\tgetSpaces().push(space);\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children.push(space);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tremoveSpace: (space) => {\r\n\t\t\tsetSpaces(getSpaces().filter((s) => s.id !== space.id));\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children = parentSpace.children.filter((s) => s.id !== space.id);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tremoveStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateStyles: (space) => {\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parent = getSpace(space.parentId);\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\trecalcSpaces(parent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateSpace: (space, props) => {\r\n\t\t\tconst {\r\n\t\t\t\ttype,\r\n\t\t\t\tanchor,\r\n\t\t\t\torder,\r\n\t\t\t\tzIndex,\r\n\t\t\t\tscrollable,\r\n\t\t\t\tposition,\r\n\t\t\t\tcenterContent,\r\n\t\t\t\tminimumSize,\r\n\t\t\t\tmaximumSize,\r\n\t\t\t\thandleSize,\r\n\t\t\t\ttouchHandleSize,\r\n\t\t\t\thandlePlacement,\r\n\t\t\t\tallowOverflow,\r\n\t\t\t} = props;\r\n\t\t\tconst canResizeLeft = (position && position.leftResizable) || false;\r\n\t\t\tconst canResizeRight = (position && position.rightResizable) || false;\r\n\t\t\tconst canResizeTop = (position && position.topResizable) || false;\r\n\t\t\tconst canResizeBottom = (position && position.bottomResizable) || false;\r\n\t\t\tconst canResizeTopLeft = (position && position.topLeftResizable) || false;\r\n\t\t\tconst canResizeTopRight = (position && position.topRightResizable) || false;\r\n\t\t\tconst canResizeBottomLeft = (position && position.bottomLeftResizable) || false;\r\n\t\t\tconst canResizeBottomRight = (position && position.bottomRightResizable) || false;\r\n\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type !== type) {\r\n\t\t\t\tspace.type = type;\r\n\t\t\t\tspace.position = getPosition(type);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.anchor !== anchor) {\r\n\t\t\t\tspace.anchor = anchor;\r\n\t\t\t\tspace.orientation = getOrientation(anchor);\r\n\t\t\t\tchanged = true;\r\n\r\n\t\t\t\tif (type === Type.Anchored) {\r\n\t\t\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustLeft;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustTop;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustRight;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (space.left.size !== (position && position.left)) {\r\n\t\t\t\tspace.left.size = position && position.left;\r\n\t\t\t\tspace.left.resized = 0;\r\n\t\t\t\tspace.left.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.right.size !== (position && position.right)) {\r\n\t\t\t\tspace.right.size = position && position.right;\r\n\t\t\t\tspace.right.resized = 0;\r\n\t\t\t\tspace.right.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.top.size !== (position && position.top)) {\r\n\t\t\t\tspace.top.size = position && position.top;\r\n\t\t\t\tspace.top.resized = 0;\r\n\t\t\t\tspace.top.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.bottom.size !== (position && position.bottom)) {\r\n\t\t\t\tspace.bottom.size = position && position.bottom;\r\n\t\t\t\tspace.bottom.resized = 0;\r\n\t\t\t\tspace.bottom.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.width.size !== (position && position.width)) {\r\n\t\t\t\tspace.width.size = position && position.width;\r\n\t\t\t\tspace.width.resized = 0;\r\n\t\t\t\tspace.width.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.height.size !== (position && position.height)) {\r\n\t\t\t\tspace.height.size = position && position.height;\r\n\t\t\t\tspace.height.resized = 0;\r\n\t\t\t\tspace.height.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.order, 0) !== coalesce(order, 0)) {\r\n\t\t\t\tspace.order = coalesce(order, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.zIndex, 0) !== coalesce(zIndex, 0)) {\r\n\t\t\t\tspace.zIndex = coalesce(zIndex, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.scrollable, false) !== coalesce(scrollable, false)) {\r\n\t\t\t\tspace.scrollable = coalesce(scrollable, false)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.minimumSize !== minimumSize) {\r\n\t\t\t\tspace.minimumSize = minimumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.maximumSize !== maximumSize) {\r\n\t\t\t\tspace.maximumSize = maximumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.centerContent, CenterType.None) !== coalesce(centerContent, CenterType.None)) {\r\n\t\t\t\tspace.centerContent = coalesce(centerContent, CenterType.None)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handleSize !== handleSize) {\r\n\t\t\t\tspace.handleSize = handleSize || spaceDefaults.handleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.touchHandleSize !== touchHandleSize) {\r\n\t\t\t\tspace.touchHandleSize = touchHandleSize || spaceDefaults.touchHandleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handlePlacement !== handlePlacement) {\r\n\t\t\t\tspace.handlePlacement = handlePlacement || spaceDefaults.handlePlacement!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottom !== canResizeBottom) {\r\n\t\t\t\tspace.canResizeBottom = canResizeBottom;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTop !== canResizeTop) {\r\n\t\t\t\tspace.canResizeTop = canResizeTop;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeLeft !== canResizeLeft) {\r\n\t\t\t\tspace.canResizeLeft = canResizeLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeRight !== canResizeRight) {\r\n\t\t\t\tspace.canResizeRight = canResizeRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTopLeft !== canResizeTopLeft) {\r\n\t\t\t\tspace.canResizeTopLeft = canResizeTopLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTopRight !== canResizeTopRight) {\r\n\t\t\t\tspace.canResizeTopRight = canResizeTopRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottomLeft !== canResizeBottomLeft) {\r\n\t\t\t\tspace.canResizeBottomLeft = canResizeBottomLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottomRight !== canResizeBottomRight) {\r\n\t\t\t\tspace.canResizeBottomRight = canResizeBottomRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.allowOverflow !== allowOverflow) {\r\n\t\t\t\tspace.allowOverflow = allowOverflow || spaceDefaults.allowOverflow!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tif (space.parentId) {\r\n\t\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateSpace: () => ({} as ISpaceDefinition),\r\n\t\tstartMouseResize: () => null,\r\n\t\tstartTouchResize: () => null,\r\n\t\tstartMouseDrag: () => null,\r\n\t\tstartTouchDrag: () => null,\r\n\t};\r\n\r\n\tconst resize = createResize(store);\r\n\tconst drag = createDrag(store);\r\n\r\n\tstore.createSpace = (parentId: string | undefined, props: ISpaceProps, update: () => void) => {\r\n\t\tconst { position, anchor, type, ...commonProps } = props;\r\n\t\tconst canResizeLeft = (position && position.rightResizable) || false;\r\n\t\tconst canResizeRight = (position && position.leftResizable) || false;\r\n\t\tconst canResizeTop = (position && position.bottomResizable) || false;\r\n\t\tconst canResizeBottom = (position && position.topResizable) || false;\r\n\t\tconst canResizeTopLeft = (position && position.topLeftResizable) || false;\r\n\t\tconst canResizeTopRight = (position && position.topRightResizable) || false;\r\n\t\tconst canResizeBottomLeft = (position && position.bottomLeftResizable) || false;\r\n\t\tconst canResizeBottomRight = (position && position.bottomRightResizable) || false;\r\n\r\n\t\tconst newSpace: ISpaceDefinition = {\r\n\t\t\t...spaceDefaults,\r\n\t\t\t...commonProps,\r\n\t\t\t...{\r\n\t\t\t\tstore: store,\r\n\t\t\t\tupdate: update,\r\n\t\t\t\tupdateParent: () => {\r\n\t\t\t\t\tif (parentId) {\r\n\t\t\t\t\t\tconst parentSpace = store.getSpace(parentId);\r\n\t\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\t\tparentSpace.update();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tparentId: parentId,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tanchor: anchor,\r\n\t\t\t\ttype: type,\r\n\t\t\t\torientation: getOrientation(anchor),\r\n\t\t\t\tposition: getPosition(type),\r\n\t\t\t\tleft: sizeInfoDefault(position && position.left),\r\n\t\t\t\tright: sizeInfoDefault(position && position.right),\r\n\t\t\t\ttop: sizeInfoDefault(position && position.top),\r\n\t\t\t\tbottom: sizeInfoDefault(position && position.bottom),\r\n\t\t\t\twidth: sizeInfoDefault(position && position.width),\r\n\t\t\t\theight: sizeInfoDefault(position && position.height),\r\n\t\t\t\tcanResizeLeft: canResizeLeft,\r\n\t\t\t\tcanResizeRight: canResizeRight,\r\n\t\t\t\tcanResizeTop: canResizeTop,\r\n\t\t\t\tcanResizeBottom: canResizeBottom,\r\n\t\t\t\tcanResizeTopLeft: canResizeTopLeft,\r\n\t\t\t\tcanResizeTopRight: canResizeTopRight,\r\n\t\t\t\tcanResizeBottomLeft: canResizeBottomLeft,\r\n\t\t\t\tcanResizeBottomRight: canResizeBottomRight,\r\n\t\t\t},\r\n\t\t} as ISpaceDefinition;\r\n\r\n\t\tnewSpace.anchoredChildren = (children, chanchor, zIndex) => {\r\n\t\t\treturn children.filter((s) => s.type === Type.Anchored && s.anchor === chanchor && s.zIndex === zIndex);\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustLeft = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.left.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.left.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustRight = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.right.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.right.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustTop = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.top.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.top.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustBottom = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.bottom.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.bottom.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tif (type === Type.Anchored) {\r\n\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustLeft;\r\n\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustTop;\r\n\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustRight;\r\n\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustBottom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newSpace;\r\n\t};\r\n\r\n\tstore.startMouseResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startMouseDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\treturn store;\r\n}\r\n","import * as React from \"react\";\r\nimport { createStore } from \"./core\";\r\nimport {\r\n\tISpaceProps,\r\n\tISpaceStore,\r\n\tISpaceDefinition,\r\n\tResizeType,\r\n\tCenterType,\r\n\tISpaceContext,\r\n\tICommonProps,\r\n\tResizeMouseEvent,\r\n\tOnDragEnd,\r\n\tResizeTouchEvent,\r\n} from \"./core-types\";\r\nimport { coalesce, shortuuid } from \"./core-utils\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\n// WORKAROUND for React18 strict mode\r\n// https://blog.ag-grid.com/avoiding-react-18-double-mount/\r\nexport const useEffectOnce = (effect: () => void | (() => void)) => {\r\n\tconst destroyFunc = useRef<void | (() => void)>();\r\n\tconst effectCalled = useRef(false);\r\n\tconst renderAfterCalled = useRef(false);\r\n\tconst [_val, setVal] = useState<number>(0);\r\n\r\n\tif (effectCalled.current) {\r\n\t\trenderAfterCalled.current = true;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t// only execute the effect first time around\r\n\t\tif (!effectCalled.current) {\r\n\t\t\tdestroyFunc.current = effect();\r\n\t\t\teffectCalled.current = true;\r\n\t\t}\r\n\r\n\t\t// this forces one render after the effect is run\r\n\t\tsetVal((val) => val + 1);\r\n\r\n\t\treturn () => {\r\n\t\t\t// if the comp didn't render since the useEffect was called,\r\n\t\t\t// we know it's the dummy React cycle\r\n\t\t\tif (!renderAfterCalled.current) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (destroyFunc.current) {\r\n\t\t\t\tdestroyFunc.current();\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n};\r\n\r\nexport const ParentContext = React.createContext<string | undefined>(undefined);\r\nexport const DOMRectContext = React.createContext<DOMRect | undefined>(undefined);\r\nexport const LayerContext = React.createContext<number | undefined>(undefined);\r\nexport const OptionsContext = React.createContext<IReactSpacesOptions>({});\r\nexport const currentStore = createStore();\r\n\r\nexport const commonProps = {\r\n\tid: PropTypes.string,\r\n\tclassName: PropTypes.string,\r\n\tstyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n\tas: PropTypes.any,\r\n\tcenterContent: PropTypes.oneOf([CenterType.None, CenterType.Vertical, CenterType.HorizontalVertical]),\r\n\tzIndex: PropTypes.number,\r\n\tscrollable: PropTypes.bool,\r\n\ttrackSize: PropTypes.bool,\r\n\tallowOverflow: PropTypes.bool,\r\n\thandleRender: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonTouchStart: PropTypes.func,\r\n\tonTouchMove: PropTypes.func,\r\n\tonTouchEnd: PropTypes.func,\r\n};\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport interface IReactEvents {\r\n\tonClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonDoubleClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseDown?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseEnter?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseLeave?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseMove?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchMove?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchEnd?: (event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface IReactSpaceCommonProps extends ICommonProps, IReactEvents {\r\n\tstyle?: React.CSSProperties;\r\n\tas?: keyof React.ReactDOM | React.ComponentType<ICommonProps>;\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport interface IReactSpaceInnerProps extends IReactSpaceCommonProps, ISpaceProps, IReactEvents {\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n}\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport function useForceUpdate() {\r\n\tconst [, setTick] = React.useState(0);\r\n\treturn React.useCallback(() => {\r\n\t\tsetTick((tick) => tick + 1);\r\n\t}, []);\r\n}\r\n\r\nexport function useUniqueId() {\r\n\tif (SSR_SUPPORT_ENABLED) {\r\n\t\tif (React.version.startsWith(\"18\")) {\r\n\t\t\treturn `s${React.useId().replace(/\\:/g, \"\")}`;\r\n\t\t}\r\n\t}\r\n\r\n\treturn `s${shortuuid()}`;\r\n}\r\n\r\nexport function useSpace(props: IReactSpaceInnerProps) {\r\n\tconst store = currentStore;\r\n\tconst update = useForceUpdate();\r\n\tconst parent = React.useContext(ParentContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst { debug } = React.useContext(OptionsContext);\r\n\tconst uniqueId = useUniqueId();\r\n\tconst [spaceId] = React.useState(props.id || uniqueId);\r\n\tconst elementRef = React.useRef<HTMLElement>();\r\n\tconst resizeSensor = React.useRef<ResizeSensor>();\r\n\tconst [domRect, setDomRect] = React.useState<DOMRect>();\r\n\r\n\tlet space = store.getSpace(spaceId)!;\r\n\r\n\tif (debug) {\r\n\t\tconsole.table(store.getSpaces());\r\n\t}\r\n\r\n\tconst parsedProps = {\r\n\t\t...props,\r\n\t\t...{\r\n\t\t\tid: spaceId,\r\n\t\t\tzIndex: coalesce(props.zIndex, layer),\r\n\t\t},\r\n\t};\r\n\r\n\tif (!space) {\r\n\t\tspace = store.createSpace(parent, parsedProps, update);\r\n\t\tstore.addSpace(space);\r\n\t} else {\r\n\t\tstore.updateSpace(space, parsedProps);\r\n\t}\r\n\r\n\tconst resizeHandles = useSpaceResizeHandles(store, space);\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tconst rect = elementRef.current ? elementRef.current.getBoundingClientRect() : new DOMRect();\r\n\t\tspace.dimension = {\r\n\t\t\t...rect,\r\n\t\t\t...{\r\n\t\t\t\tleft: Math.floor(rect.left),\r\n\t\t\t\ttop: Math.floor(rect.top),\r\n\t\t\t\tright: Math.floor(rect.right),\r\n\t\t\t\tbottom: Math.floor(rect.bottom),\r\n\t\t\t\twidth: Math.floor(rect.width),\r\n\t\t\t\theight: Math.floor(rect.height),\r\n\t\t\t\tx: Math.floor(rect.x),\r\n\t\t\t\ty: Math.floor(rect.y),\r\n\t\t\t},\r\n\t\t};\r\n\t\tsetDomRect(space.dimension);\r\n\r\n\t\tif (props.trackSize) {\r\n\t\t\tresizeSensor.current = new ResizeSensor(elementRef.current!, (size) => {\r\n\t\t\t\tspace.dimension = {\r\n\t\t\t\t\t...rect,\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\twidth: Math.floor(size.width),\r\n\t\t\t\t\t\theight: Math.floor(size.height),\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tsetDomRect(space.dimension);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tresizeSensor.current && resizeSensor.current.detach();\r\n\t\t\tstore.removeSpace(space);\r\n\t\t};\r\n\t});\r\n\r\n\treturn { space: space, resizeHandles: resizeHandles, domRect: domRect, elementRef: elementRef };\r\n}\r\n\r\nexport interface IResizeHandleProps {\r\n\tid?: string;\r\n\tkey: string | number;\r\n\tclassName?: string;\r\n\tonMouseDown: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart: (e: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nconst resizeSetup = [\r\n\t{ id: \"ml\", className: \"resize-left\", resizeType: ResizeType.Left, condition: (space: ISpaceDefinition) => space.canResizeLeft },\r\n\t{ id: \"mr\", className: \"resize-right\", resizeType: ResizeType.Right, condition: (space: ISpaceDefinition) => space.canResizeRight },\r\n\t{ id: \"mt\", className: \"resize-top\", resizeType: ResizeType.Top, condition: (space: ISpaceDefinition) => space.canResizeTop },\r\n\t{ id: \"mb\", className: \"resize-bottom\", resizeType: ResizeType.Bottom, condition: (space: ISpaceDefinition) => space.canResizeBottom },\r\n\t{ id: \"mtl\", className: \"resize-top-left\", resizeType: ResizeType.TopLeft, condition: (space: ISpaceDefinition) => space.canResizeTopLeft },\r\n\t{ id: \"mtr\", className: \"resize-top-right\", resizeType: ResizeType.TopRight, condition: (space: ISpaceDefinition) => space.canResizeTopRight },\r\n\t{\r\n\t\tid: \"mbl\",\r\n\t\tclassName: \"resize-bottom-left\",\r\n\t\tresizeType: ResizeType.BottomLeft,\r\n\t\tcondition: (space: ISpaceDefinition) => space.canResizeBottomLeft,\r\n\t},\r\n\t{\r\n\t\tid: \"mbr\",\r\n\t\tclassName: \"resize-bottom-right\",\r\n\t\tresizeType: ResizeType.BottomRight,\r\n\t\tcondition: (space: ISpaceDefinition) => space.canResizeBottomRight,\r\n\t},\r\n];\r\n\r\nexport function useSpaceResizeHandles(store: ISpaceStore, space: ISpaceDefinition) {\r\n\tconst mouseHandles: IResizeHandleProps[] = [];\r\n\r\n\tconst setupResizeHandle = (id: string, className: string, resizeType: ResizeType) => {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-${id}`,\r\n\t\t\tkey: id,\r\n\t\t\tclassName: `spaces-resize-handle ${className}`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(resizeType, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(resizeType, space, event),\r\n\t\t});\r\n\t};\r\n\r\n\tresizeSetup.forEach((resizeItem) => {\r\n\t\tif (resizeItem.condition(space)) {\r\n\t\t\tsetupResizeHandle(resizeItem.id, resizeItem.className, resizeItem.resizeType);\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tmouseHandles,\r\n\t};\r\n}\r\n\r\nexport function useCurrentSpace() {\r\n\tconst store = currentStore;\r\n\tconst spaceId = React.useContext(ParentContext);\r\n\r\n\tconst space = spaceId ? store.getSpace(spaceId) : undefined;\r\n\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst onMouseDrag = React.useCallback(\r\n\t\t(e: ResizeMouseEvent, onDragEnd: OnDragEnd | undefined) => (space ? store.startMouseDrag(space, e, onDragEnd) : null),\r\n\t\t[spaceId],\r\n\t);\r\n\tconst onTouchDrag = React.useCallback(\r\n\t\t(e: ResizeTouchEvent, onDragEnd: OnDragEnd | undefined) => (space ? store.startTouchDrag(space, e, onDragEnd) : null),\r\n\t\t[spaceId],\r\n\t);\r\n\tconst onForceUpdate = React.useCallback(() => (space ? store.updateStyles(space) : null), [spaceId]);\r\n\r\n\tconst defaults = { width: 0, height: 0, x: 0, y: 0 };\r\n\tconst size = {\r\n\t\t...defaults,\r\n\t\t...domRect,\r\n\t};\r\n\r\n\treturn {\r\n\t\tsize: size,\r\n\t\tlayer: layer || 0,\r\n\t\tstartMouseDrag: onMouseDrag,\r\n\t\tstartTouchDrag: onTouchDrag,\r\n\t\tforceUpdate: onForceUpdate,\r\n\t} as ISpaceContext;\r\n}\r\n\r\nexport let SSR_SUPPORT_ENABLED = false;\r\nexport function enabledSsrSupport() {\r\n\tSSR_SUPPORT_ENABLED = true;\r\n}\r\n","import * as React from \"react\";\r\n\r\ninterface IProps {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Centered: React.FC<IProps> = (props) => <div className={`spaces-centered`}>{props.children}</div>;\r\n","import * as React from \"react\";\r\n\r\ninterface IProps {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const CenteredVertically: React.FC<IProps> = (props) => <div className={`spaces-centered-vertically`}>{props.children}</div>;\r\n","import { CenterType, ResizeHandlePlacement, AnchorType, Type } from \"../core-types\";\r\nimport {\r\n\tuseSpace,\r\n\tParentContext,\r\n\tLayerContext,\r\n\tDOMRectContext,\r\n\tIReactSpaceInnerProps,\r\n\tuseEffectOnce,\r\n\tSSR_SUPPORT_ENABLED,\r\n\tuseUniqueId,\r\n} from \"../core-react\";\r\nimport * as React from \"react\";\r\nimport { Centered } from \"./Centered\";\r\nimport { CenteredVertically } from \"./CenteredVertically\";\r\nimport { isServer, updateStyleDefinition } from \"../core-utils\";\r\n\r\nfunction applyCentering(children: React.ReactNode, centerType: CenterType | undefined) {\r\n\tswitch (centerType) {\r\n\t\tcase CenterType.Vertical:\r\n\t\t\treturn <CenteredVertically>{children}</CenteredVertically>;\r\n\t\tcase CenterType.HorizontalVertical:\r\n\t\t\treturn <Centered>{children}</Centered>;\r\n\t}\r\n\treturn children;\r\n}\r\n\r\nexport class Space extends React.Component<IReactSpaceInnerProps> {\r\n\tpublic render() {\r\n\t\treturn <SpaceInner {...this.props} wrapperInstance={this} />;\r\n\t}\r\n}\r\n\r\nconst SpaceInner: React.FC<IReactSpaceInnerProps & { wrapperInstance: Space }> = (props) => {\r\n\tlet idToUse = props.id ?? props.wrapperInstance[\"_react_spaces_uniqueid\"];\r\n\tconst [initialRender, setInitialRender] = React.useState(SSR_SUPPORT_ENABLED ? true : false);\r\n\r\n\tconst uniqueId = useUniqueId();\r\n\r\n\tif (!idToUse) {\r\n\t\tprops.wrapperInstance[\"_react_spaces_uniqueid\"] = uniqueId;\r\n\t\tidToUse = props.wrapperInstance[\"_react_spaces_uniqueid\"];\r\n\t}\r\n\r\n\tconst {\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonDoubleClick,\r\n\t\tonMouseDown,\r\n\t\tonMouseEnter,\r\n\t\tonMouseLeave,\r\n\t\tonMouseMove,\r\n\t\tonTouchStart,\r\n\t\tonTouchMove,\r\n\t\tonTouchEnd,\r\n\t\tchildren,\r\n\t\thandleRender,\r\n\t} = props;\r\n\r\n\tconst events = {\r\n\t\tonClick: onClick,\r\n\t\tonDoubleClick: onDoubleClick,\r\n\t\tonMouseDown: onMouseDown,\r\n\t\tonMouseEnter: onMouseEnter,\r\n\t\tonMouseLeave: onMouseLeave,\r\n\t\tonMouseMove: onMouseMove,\r\n\t\tonTouchStart: onTouchStart,\r\n\t\tonTouchMove: onTouchMove,\r\n\t\tonTouchEnd: onTouchEnd,\r\n\t};\r\n\r\n\tconst { space, domRect, elementRef, resizeHandles } = useSpace({\r\n\t\t...props,\r\n\t\t...{ id: idToUse },\r\n\t});\r\n\r\n\tif (SSR_SUPPORT_ENABLED && !isServer()) {\r\n\t\tconst preRenderedStyle = document.getElementById(`style_${idToUse}_ssr`);\r\n\t\tif (preRenderedStyle) {\r\n\t\t\tspace.ssrStyle = preRenderedStyle.innerHTML;\r\n\t\t}\r\n\t\tupdateStyleDefinition(space);\r\n\t}\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tspace.element = elementRef.current!;\r\n\r\n\t\tif (SSR_SUPPORT_ENABLED) {\r\n\t\t\tif (initialRender) {\r\n\t\t\t\tsetInitialRender(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst userClasses = className ? className.split(\" \").map((c) => c.trim()) : [];\r\n\r\n\tconst outerClasses = [\r\n\t\t...[\"spaces-space\", space.children.find((s) => s.resizing) ? \"spaces-resizing\" : undefined],\r\n\t\t...[space.type === Type.Fixed ? \"spaces-fixedsize-layout\" : undefined],\r\n\t\t...[space.type === Type.ViewPort ? \"spaces-fullpage-layout\" : undefined],\r\n\t\t...userClasses.map((c) => `${c}-container`),\r\n\t].filter((c) => c);\r\n\r\n\tconst innerClasses = [...[\"spaces-space-inner\"], ...userClasses];\r\n\r\n\tlet innerStyle = style;\r\n\tif (space.handlePlacement === ResizeHandlePlacement.Inside) {\r\n\t\tinnerStyle = {\r\n\t\t\t...style,\r\n\t\t\t...{\r\n\t\t\t\tleft: space.anchor === AnchorType.Right ? space.handleSize : undefined,\r\n\t\t\t\tright: space.anchor === AnchorType.Left ? space.handleSize : undefined,\r\n\t\t\t\ttop: space.anchor === AnchorType.Bottom ? space.handleSize : undefined,\r\n\t\t\t\tbottom: space.anchor === AnchorType.Top ? space.handleSize : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tconst centeredContent = applyCentering(children, props.centerContent);\r\n\r\n\tconst outerProps = {\r\n\t\t...{\r\n\t\t\tid: space.id,\r\n\t\t\tref: elementRef,\r\n\t\t\tclassName: outerClasses.join(\" \"),\r\n\t\t},\r\n\t\t...events,\r\n\t} as any;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{resizeHandles.mouseHandles.map((handleProps) => handleRender?.(handleProps) || <div {...handleProps} />)}\r\n\t\t\t{SSR_SUPPORT_ENABLED && space.ssrStyle && initialRender && <style id={`style_${space.id}_ssr`}>{space.ssrStyle}</style>}\r\n\t\t\t{React.createElement(\r\n\t\t\t\tprops.as || \"div\",\r\n\t\t\t\touterProps,\r\n\t\t\t\t<div className={innerClasses.join(\" \")} style={innerStyle}>\r\n\t\t\t\t\t<ParentContext.Provider value={space.id}>\r\n\t\t\t\t\t\t<LayerContext.Provider value={undefined}>\r\n\t\t\t\t\t\t\t<DOMRectContext.Provider value={domRect}>{centeredContent}</DOMRectContext.Provider>\r\n\t\t\t\t\t\t</LayerContext.Provider>\r\n\t\t\t\t\t</ParentContext.Provider>\r\n\t\t\t\t</div>,\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","import { SizeUnit, Type, AnchorType, ResizeHandlePlacement } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps, IResizeHandleProps } from \"../core-react\";\r\n\r\nexport interface IResizableProps extends IReactSpaceCommonProps {\r\n\tsize: SizeUnit;\r\n\torder?: number;\r\n\thandleSize?: number;\r\n\ttouchHandleSize?: number;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const resizableProps = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tsize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t\torder: PropTypes.number,\r\n\t\thandleSize: PropTypes.number,\r\n\t\ttouchHandleSize: PropTypes.number,\r\n\t\thandlePlacement: PropTypes.oneOf([ResizeHandlePlacement.Inside, ResizeHandlePlacement.OverlayBoundary, ResizeHandlePlacement.OverlayInside]),\r\n\t\thandleRender: PropTypes.func,\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n\r\nexport interface IAnchorProps extends IResizableProps {\r\n\tresizable?: boolean;\r\n}\r\n\r\nexport const anchoredProps = {\r\n\t...resizableProps,\r\n\t...{\r\n\t\tresizable: PropTypes.bool,\r\n\t},\r\n};\r\n\r\nexport const LeftResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Left} position={{ left: 0, top: 0, bottom: 0, rightResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeftResizable.propTypes = resizableProps;\r\n\r\nexport const Left: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Left}\r\n\t\tposition={{ left: 0, top: 0, bottom: 0, rightResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeft.propTypes = anchoredProps;\r\n\r\nexport const TopResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Top} position={{ left: 0, top: 0, right: 0, bottomResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTopResizable.propTypes = resizableProps;\r\n\r\nexport const Top: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Top}\r\n\t\tposition={{ left: 0, top: 0, right: 0, bottomResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTop.propTypes = anchoredProps;\r\n\r\nexport const RightResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Right} position={{ bottom: 0, top: 0, right: 0, leftResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRightResizable.propTypes = resizableProps;\r\n\r\nexport const Right: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Right}\r\n\t\tposition={{ bottom: 0, top: 0, right: 0, leftResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRight.propTypes = anchoredProps;\r\n\r\nexport const BottomResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Bottom} position={{ bottom: 0, left: 0, right: 0, topResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottomResizable.propTypes = resizableProps;\r\n\r\nexport const Bottom: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Bottom}\r\n\t\tposition={{ bottom: 0, left: 0, right: 0, topResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottom.propTypes = anchoredProps;\r\n","import { Type, SizeUnit, IPositionalProps, AnchorType, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { IReactSpaceCommonProps } from \"../core-react\";\r\nimport { anchoredProps, IAnchorProps } from \"./Anchored\";\r\nimport { omit } from \"../core-utils\";\r\n\r\ntype ICustomProps = Omit<IReactSpaceCommonProps & IAnchorProps, \"size\"> & {\r\n\ttype?: Type;\r\n\r\n\t// Anchored\r\n\tanchor?: AnchorType;\r\n\tanchorSize?: SizeUnit;\r\n\r\n\t// Positioned\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n\tresizeTypes?: ResizeType[];\r\n};\r\n\r\nconst customProps = omit(\r\n\t{\r\n\t\t...anchoredProps,\r\n\t\t...{\r\n\t\t\ttype: PropTypes.oneOf([Type.Positioned, Type.Fill, Type.Anchored]),\r\n\r\n\t\t\tanchor: PropTypes.oneOf([AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom]),\r\n\t\t\tanchorSize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\r\n\t\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\t\tresizeTypes: PropTypes.array,\r\n\t\t},\r\n\t},\r\n\t\"size\",\r\n);\r\n\r\nexport const Custom: React.FC<ICustomProps> = ({\r\n\tchildren,\r\n\ttype,\r\n\tleft,\r\n\ttop,\r\n\tright,\r\n\tbottom,\r\n\twidth,\r\n\theight,\r\n\tanchorSize,\r\n\tanchor,\r\n\tresizable,\r\n\tresizeTypes,\r\n\t...props\r\n}) => {\r\n\tlet position: IPositionalProps;\r\n\ttype = type || Type.Fill;\r\n\r\n\tif (type === Type.Positioned) {\r\n\t\tposition = {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top,\r\n\t\t\tright: right,\r\n\t\t\tbottom: bottom,\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tleftResizable: resizeTypes && (resizeTypes.includes(ResizeType.Left) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopResizable: resizeTypes && (resizeTypes.includes(ResizeType.Top) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\trightResizable: resizeTypes && (resizeTypes.includes(ResizeType.Right) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomResizable: resizeTypes && (resizeTypes.includes(ResizeType.Bottom) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopLeftResizable: resizeTypes && (resizeTypes.includes(ResizeType.TopLeft) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\ttopRightResizable: resizeTypes && (resizeTypes.includes(ResizeType.TopRight) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomLeftResizable: resizeTypes && (resizeTypes.includes(ResizeType.BottomLeft) || resizeTypes.includes(ResizeType.All)),\r\n\t\t\tbottomRightResizable: resizeTypes && (resizeTypes.includes(ResizeType.BottomRight) || resizeTypes.includes(ResizeType.All)),\r\n\t\t};\r\n\t} else {\r\n\t\tif (anchor === AnchorType.Left) {\r\n\t\t\tposition = { left: 0, top: 0, bottom: 0, width: anchorSize, rightResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\tposition = { right: 0, top: 0, bottom: 0, width: anchorSize, leftResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\tposition = { left: 0, top: 0, right: 0, height: anchorSize, bottomResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\tposition = { left: 0, bottom: 0, right: 0, height: anchorSize, topResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else {\r\n\t\t\tposition = {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t};\r\n\t\t\ttype = Type.Fill;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Space {...props} type={type} anchor={anchor} position={position}>\r\n\t\t\t{children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nCustom.propTypes = customProps;\r\n","import { Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\nexport const Fill: React.FC<IReactSpaceCommonProps> = (props) => (\r\n\t<Space {...props} type={Type.Fill} position={{ left: 0, top: 0, right: 0, bottom: 0 }}>\r\n\t\t{props.children}\r\n\t</Space>\r\n);\r\n\r\nFill.propTypes = commonProps;\r\n","import { SizeUnit, Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IFixedProps extends IReactSpaceCommonProps {\r\n\twidth?: SizeUnit;\r\n\theight: SizeUnit;\r\n}\r\n\r\nexport const Fixed: React.FC<IFixedProps> = ({ width, height, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.Fixed} position={{ width: width, height: height }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nFixed.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { LayerContext } from \"../core-react\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\ninterface IProps {\r\n\tzIndex: number;\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Layer: React.FC<IProps> = (props) => <LayerContext.Provider value={props.zIndex}>{props.children}</LayerContext.Provider>;\r\n\r\nLayer.propTypes = {\r\n\tzIndex: PropTypes.number.isRequired,\r\n};\r\n","import { Type, SizeUnit, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IPositionedProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n\twidth?: SizeUnit;\r\n\theight?: SizeUnit;\r\n\tresizable?: ResizeType[];\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const Positioned: React.FC<IPositionedProps> = ({ left, top, right, bottom, width, height, resizable, ...props }) => {\r\n\tconst resizeTypes = resizable || [];\r\n\r\n\treturn (\r\n\t\t<Space\r\n\t\t\t{...props}\r\n\t\t\ttype={Type.Positioned}\r\n\t\t\tposition={{\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top,\r\n\t\t\t\tright: right,\r\n\t\t\t\tbottom: bottom,\r\n\t\t\t\tleftResizable: resizeTypes.includes(ResizeType.Left) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopResizable: resizeTypes.includes(ResizeType.Top) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\trightResizable: resizeTypes.includes(ResizeType.Right) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomResizable: resizeTypes.includes(ResizeType.Bottom) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopLeftResizable: resizeTypes.includes(ResizeType.TopLeft) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\ttopRightResizable: resizeTypes.includes(ResizeType.TopRight) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomLeftResizable: resizeTypes.includes(ResizeType.BottomLeft) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\tbottomRightResizable: resizeTypes.includes(ResizeType.BottomRight) || resizeTypes.includes(ResizeType.All),\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height,\r\n\t\t\t}}>\r\n\t\t\t{props.children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nPositioned.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizable: PropTypes.array,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { DOMRectContext } from \"../core-react\";\r\n\r\ninterface ISpaceInfoProps {\r\n\tchildren: (info: DOMRect) => JSX.Element;\r\n}\r\n\r\n/**\r\n * @deprecated use useCurrentSpace() hook instead\r\n */\r\nexport const Info: React.FC<ISpaceInfoProps> = (props) => {\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\r\n\tif (domRect) {\r\n\t\treturn props.children(domRect);\r\n\t}\r\n\r\n\treturn props.children({ left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" });\r\n};\r\n","import { Type, SizeUnit } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IViewPortProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n}\r\n\r\nexport const ViewPort: React.FC<IViewPortProps> = ({ left, top, right, bottom, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.ViewPort} position={{ left: left || 0, top: top || 0, right: right || 0, bottom: bottom || 0 }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nViewPort.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t},\r\n};\r\n","import * as React from \"react\";\nimport { enabledSsrSupport } from \"../core-react\";\nimport css from \"../styles.css\";\n\nexport const SSR: React.FC<{ children?: React.ReactNode }> = ({ children }) => {\n\tenabledSsrSupport();\n\treturn (\n\t\t<>\n\t\t\t<style dangerouslySetInnerHTML={{ __html: css }} />\n\t\t\t{children}\n\t\t</>\n\t);\n};\n","import * as React from \"react\";\r\nimport { IReactSpacesOptions, OptionsContext } from \"../core-react\";\r\n\r\ninterface IProps extends IReactSpacesOptions {\r\n\tchildren?: React.ReactNode;\r\n}\r\n\r\nexport const Options: React.FC<IProps> = ({ children, ...opts }) => {\r\n\treturn <OptionsContext.Provider value={opts}>{children}</OptionsContext.Provider>;\r\n};\r\n"],"names":["styleInject","css","ref","head","style","insertAt","document","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Orientation","MoveEvent","EndEvent","omit","object","keys","_i","arguments","length","keySet","Object","create","result","forEach","key","shortuuid","firstPart","Math","random","secondPart","toString","slice","getSizeString","size","concat","dontAddCalc","parts","adjusted","resized","undefined","push","l","join","coalesce","args","find","x","adjustmentsEqual","item1","item2","i","len","throttle","callback","limit","wait","apply","setTimeout","styleDefinition","space","cssElements","position","left","top","right","bottom","width","height","zIndex","cssString","nhandleOffset","allowOverflow","id","scrollable","handleSize","touchHandleSize","negativeTouchHandleSize","handlePlacement","ResizeHandlePlacement","Inside","OverlayInside","Type","Positioned","OverlayBoundary","addHandleCss","pos","styles","widthOrHeightSpecified","orientation","Horizontal","handleOffset","canResizeLeft","anchor","canResizeTop","canResizeRight","canResizeBottom","canResizeTopLeft","canResizeTopRight","canResizeBottomLeft","canResizeBottomRight","updateStyleDefinition","newStyle","definition","isServer","ssrStyle","existing","getElementById","innerHTML","removeStyleDefinition","removeChild","isHorizontal","resizeType","ResizeType","Left","Right","createSideAdjuster","rect","dimensionToAdjust","originalX","originalY","negater","Bottom","val","candidateOppositeDimensionToAdjust","offset1","offset2","minimumAdjust","minimumSize","maximumAdjust","maximumSize","currentX","currentY","adjustment","dimensionResized","max","createAdjuster","element","getBoundingClientRect","Top","TopLeft","topAdjuster_1","leftAdjuster_1","y","TopRight","top1Adjuster_1","rightAdjuster_1","BottomLeft","bottomAdjuster_1","left1Adjuster_1","BottomRight","bottom1Adjuster_1","right1Adjuster_1","createResize","store","startResize","e","endEvent","moveEvent","getCoords","onResizeEnd","onResizeStart","originalCoords","adjuster","lastX","resizing","updateParent","lastY","moved","resize","updateStyles","withPreventDefault","newCoords","preventDefault","window","requestAnimationFrame","removeListener","removeEventListener","currentRect","resizeEnd","floor","addEventListener","createDrag","startDrag","onDragEnd","adjustedLeft","adjustedTop","originalMouseX_1","originalMouseY_1","lastX_1","lastY_1","moved_1","mouseMove_1","throttledMouseMove_1","withPreventDefault_1","removeListener_1","coords","adjustmentX","adjustmentY","parentInfo","_a","parentId","getSpace","info","__assign","AnchorType","CenterType","spaceDefaults","centerContent","dimension","toJSON","adjustLeft","adjustRight","adjustTop","adjustBottom","adjustEdge","anchoredChildren","anchorTypes","getPosition","ViewPort","Fixed","getOrientation","Vertical","anchorUpdates","update","sizeInfoDefault","createStore","spaces","s","getSpaces","recalcSpaces","parent","onlyUnique","value","index","self","indexOf","orderedSpaces","children","t","anchoredSpaces","filter","map","anchoredSpacesInLayer","c","order","unorderedSpaces","maxOrder","a","reduce","b","__spreadArray","idx","adjusted_1","changed","Fill","as","Anchored","addSpace","parentSpace","removeSpace","parent_1","updateSpace","props","leftResizable","rightResizable","topResizable","bottomResizable","topLeftResizable","topRightResizable","bottomLeftResizable","bottomRightResizable","None","createSpace","startMouseResize","startTouchResize","startMouseDrag","startTouchDrag","drag","commonProps","newSpace","chanchor","event","Mouse","clientX","clientY","Touch","touches","useEffectOnce","effect","destroyFunc","useRef","effectCalled","renderAfterCalled","useState","setVal","current","useEffect","ParentContext","React","createContext","DOMRectContext","LayerContext","OptionsContext","currentStore","PropTypes","string","className","oneOfType","array","any","oneOf","HorizontalVertical","number","bool","trackSize","handleRender","func","onClick","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","useForceUpdate","setTick","useCallback","tick","useUniqueId","SSR_SUPPORT_ENABLED","version","startsWith","useId","replace","useSpace","useContext","layer","debug","uniqueId","spaceId","elementRef","resizeSensor","domRect","setDomRect","parsedProps","console","table","resizeHandles","useSpaceResizeHandles","DOMRect","ResizeSensor","detach","resizeSetup","condition","mouseHandles","resizeItem","useCurrentSpace","onMouseDrag","onTouchDrag","onForceUpdate","forceUpdate","enabledSsrSupport","Centered","CenteredVertically","applyCentering","centerType","Space","_super","__extends","prototype","render","SpaceInner","this","wrapperInstance","Component","idToUse","_b","initialRender","setInitialRender","events","_c","userClasses","preRenderedStyle","split","trim","outerClasses","innerClasses","innerStyle","centeredContent","outerProps","Fragment","handleProps","Provider","resizableProps","isRequired","anchoredProps","resizable","LeftResizable","__rest","propTypes","TopResizable","RightResizable","BottomResizable","customProps","anchorSize","resizeTypes","Custom","includes","All","Layer","Info","SSR","dangerouslySetInnerHTML","__html","Options","opts"],"mappings":"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"}