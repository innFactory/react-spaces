"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),cssElementQueries=require("css-element-queries"),PropTypes=require("prop-types");function _interopNamespace(o){if(o&&o.__esModule)return o;var n=Object.create(null);return o&&Object.keys(o).forEach(function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return o[e]}})}}),n.default=o,Object.freeze(n)}var React__namespace=_interopNamespace(React),PropTypes__namespace=_interopNamespace(PropTypes),css$1=void 0,extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var Orientation,MoveEvent,EndEvent,__assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function __rest(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}function __spreadArray(e,t,o){if(o||2===arguments.length)for(var n,r=0,s=t.length;r<s;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function omit(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=Object.create(null);e.forEach(function(e){n[e]=!0});var r=Object.create(null);return Object.keys(t).forEach(function(e){n[e]||(r[e]=t[e])}),r}function shortuuid(){var e=46656*Math.random()|0,t=46656*Math.random()|0;return("000"+e.toString(36)).slice(-3)+("000"+t.toString(36)).slice(-3)}function getSizeString(e){return"string"==typeof e?e:e+"px"}function css(e,t){if(0===e.size&&0===e.adjusted.length&&0===e.resized)return"0px";var o=[];return void 0!==e.size&&o.push(getSizeString(e.size)),e.adjusted.forEach(function(e){return o.push(getSizeString(e))}),0!==e.resized&&o.push(getSizeString(e.resized)),0!==o.length?1===o.length?o[0]:t?o.join(" + "):"calc("+o.join(" + ")+")":void 0}function coalesce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.find(function(e){return null!=e})}function adjustmentsEqual(e,t){if(e.length!==t.length)return!1;for(var o=0,n=e.length;o<n;o++)if(e[o]!==t[o])return!1;return!0}function throttle(o,n){var r=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||(o.apply(void 0,e),r=!0,setTimeout(function(){r=!1},n))}}function styleDefinition(n){var r=[],e=n.position,t=css(n.left),o=css(n.top),s=css(n.right),i=css(n.bottom),a=css(n.width),p=css(n.height),c=n.zIndex,l=[];e&&l.push("position: "+e+";"),t&&l.push("left: "+t+";"),o&&l.push("top: "+o+";"),s&&l.push("right: "+s+";"),i&&l.push("bottom: "+i+";"),a&&l.push("width: "+a+";"),p&&l.push("height: "+p+";"),c&&l.push("z-index: "+c+";"),n.allowOverflow&&l.push("overflow: visible;"),0<l.length&&r.push("#"+n.id+" { "+l.join(" ")+" }"),n.scrollable&&r.push("#"+n.id+" > .spaces-space-inner { overflow: auto; touch-action: auto; }");var u=0,h=n.handleSize+"px",d="-"+(n.touchHandleSize/2-n.handleSize/2)+"px",m=n.touchHandleSize/2-n.handleSize/2+"px";switch(n.handlePlacement){case exports.ResizeHandlePlacement.Inside:case exports.ResizeHandlePlacement.OverlayInside:u=n.handleSize,n.type===exports.Type.Positioned&&(u=0);break;case exports.ResizeHandlePlacement.OverlayBoundary:u=n.handleSize/2}function f(e,t){var o=[];t.left&&o.push("left: "+t.left),t.top&&o.push("top: "+t.top),t.right&&o.push("right: "+t.right),t.bottom&&o.push("bottom: "+t.bottom),t.width&&o.push("width: "+t.width),t.height&&o.push("height: "+t.height),r.push("#"+n.id+"-"+e+" { "+o.join("; ")+"}")}function _(){return n.type===exports.Type.Positioned?n.width.size&&n.height.size:n.orientation==Orientation.Horizontal?n.width.size:n.height.size}var y=u+"px";return n.canResizeLeft&&(n.anchor?f("ml",{right:"calc("+css(n.right,!0)+" + "+css(n.width)+" - "+y+")",top:"0",bottom:"0",width:h}):f("ml",{left:"calc("+css(n.left,!0)+" - "+y+")",top:css(n.top),bottom:css(n.bottom),width:h,height:css(n.height)}),f("ml:after",{left:d,right:d,top:d,bottom:d})),n.canResizeTop&&(n.anchor?(f("mt",{left:"0",right:"0",bottom:"calc("+css(n.bottom)+" + "+css(n.height)+" - "+y+")",height:h}),f("mt:after",{top:d,bottom:d,left:d,width:css(n.width),right:d})):(f("mt",{top:"calc("+css(n.top,!0)+" - "+y+")",left:css(n.left),right:css(n.right),width:css(n.width),height:h}),_()?f("mt:after",{top:d,bottom:d,left:d,width:"calc("+css(n.width,!0)+" - "+y+") + "+m,right:d}):f("mt:after",{top:d,bottom:d,left:d,width:css(n.width),right:d}))),n.canResizeRight&&(_()?f("mr",{left:"calc("+css(n.left,!0)+" + "+css(n.width,!0)+" - "+h+" + "+y+")",top:css(n.top),bottom:css(n.bottom),width:h,height:css(n.height)}):f("mr",{right:"calc("+css(n.right,!0)+" - "+y+")",top:css(n.top),bottom:css(n.bottom),width:h,height:css(n.height)}),f("mr:after",{left:d,right:d,top:d,bottom:d})),n.canResizeBottom&&(_()?f("mb",{top:"calc("+css(n.top,!0)+" + "+css(n.height,!0)+" - "+h+" + "+y+")",left:css(n.left),right:css(n.right),width:css(n.width),height:h}):f("mb",{bottom:"calc("+css(n.bottom,!0)+" - "+y+")",left:css(n.left),right:css(n.right),width:css(n.width),height:h}),f("mb:after",{top:d,bottom:d,left:d,right:d})),n.canResizeTopLeft&&(f("mtl",{left:"calc("+css(n.left,!0)+" - "+y+")",top:css(n.top),width:h,height:h}),f("mtl:after",{top:d,bottom:d,left:d,right:d})),n.canResizeTopRight&&(_()?f("mtr",{left:"calc("+css(n.left,!0)+" + "+css(n.width,!0)+" - "+h+" + "+y+")",top:css(n.top),width:h,height:h}):f("mtr",{right:"calc("+css(n.right,!0)+" - "+y+")",top:css(n.top),width:h,height:h}),f("mtr:after",{top:d,bottom:d,left:d,right:d})),n.canResizeBottomLeft&&(_()?f("mbl",{top:"calc("+css(n.top,!0)+" + "+css(n.height,!0)+" - "+h+" + "+y+")",left:css(n.left),width:h,height:h}):f("mbl",{bottom:"calc("+css(n.bottom,!0)+" - "+y+")",left:css(n.left),width:h,height:h}),f("mbl:after",{top:d,bottom:d,left:d,right:d})),n.canResizeBottomRight&&(_()?f("mbr",{left:"calc("+css(n.left,!0)+" + "+css(n.width,!0)+" - "+h+" + "+y+")",top:"calc("+css(n.top,!0)+" + "+css(n.height,!0)+" - "+h+" + "+y+")",width:h,height:h}):f("mbr",{right:"calc("+css(n.right,!0)+" - "+y+")",bottom:"calc("+css(n.bottom,!0)+" - "+y+")",width:h,height:h}),f("mbr:after",{top:d,bottom:d,left:d,right:d})),r.join(" ")}function updateStyleDefinition(e){var t=styleDefinition(e);if(isServer())e.ssrStyle=t;else{var o=document.getElementById("style_"+e.id);if(o)o.innerHTML!==t&&(o.innerHTML=t);else{var n=document.createElement("style");n.id="style_"+e.id,n.innerHTML=t,document.head.appendChild(n)}}}function removeStyleDefinition(e){var t=document.getElementById("style_"+e.id);t&&document.head.removeChild(t)}function isServer(){return"undefined"==typeof document||!document}function isHorizontal(e){return e===exports.ResizeType.Left||e===exports.ResizeType.Right}function createSideAdjuster(e,r,s,i,a,p){var c=r===exports.ResizeType.Right||r===exports.ResizeType.Bottom?function(e){return-e}:function(e){return e},l=isHorizontal(r)?i.width:i.height,u=s.resized,h=l.resized,t=isHorizontal(r)?e.width:e.height,d=coalesce(i.minimumSize,20)-t+0,m=i.maximumSize?i.maximumSize-t+0:void 0;return function(e,t){var o=(isHorizontal(r)?a:p)-(isHorizontal(r)?e:t),n=c(o);i.type!==exports.Type.Positioned&&((n=Math.max(c(o),d))<d&&(n=d),"number"==typeof m&&m<n&&(n=m)),void 0!==s.size?(s.resized=c(-o)+u,l.size&&(l.resized=c(o)+h)):l.resized=n+h}}function createAdjuster(e,t,o,n){var r=t.element.getBoundingClientRect();switch(e){case exports.ResizeType.Left:return createSideAdjuster(r,e,t.left,t,o,n);case exports.ResizeType.Right:return createSideAdjuster(r,e,t.right,t,o,n);case exports.ResizeType.Bottom:return createSideAdjuster(r,e,t.bottom,t,o,n);case exports.ResizeType.Top:return createSideAdjuster(r,e,t.top,t,o,n);case exports.ResizeType.TopLeft:var s=createSideAdjuster(r,exports.ResizeType.Top,t.top,t,o,n),i=createSideAdjuster(r,exports.ResizeType.Left,t.left,t,o,n);return function(e,t){s(e,t),i(e,t)};case exports.ResizeType.TopRight:var a=createSideAdjuster(r,exports.ResizeType.Top,t.top,t,o,n),p=createSideAdjuster(r,exports.ResizeType.Right,t.right,t,o,n);return function(e,t){a(e,t),p(e,t)};case exports.ResizeType.BottomLeft:var c=createSideAdjuster(r,exports.ResizeType.Bottom,t.bottom,t,o,n),l=createSideAdjuster(r,exports.ResizeType.Left,t.left,t,o,n);return function(e,t){c(e,t),l(e,t)};case exports.ResizeType.BottomRight:var u=createSideAdjuster(r,exports.ResizeType.Bottom,t.bottom,t,o,n),h=createSideAdjuster(r,exports.ResizeType.Right,t.right,t,o,n);return function(e,t){u(e,t),h(e,t)};default:throw"Resize type "+e+" not supported"}}function createResize(_){return{startResize:function(e,o,n,r,s,i,a){if(n.onResizeStart){var t=n.onResizeStart(o);if("boolean"==typeof t&&!t)return}var p=i(e),c=createAdjuster(o,n,p.x,p.y);n.resizing=!0,n.updateParent();function l(e,t){c(e,t),_.updateStyles(n)}function u(e){m=!0;var t=i(e);h=t.x,d=t.y,e.preventDefault(),window.requestAnimationFrame(function(){n.resizing&&l(h,d)})}var h=0,d=0,m=!1,f=function(){n.resizing=!1,m&&l(h,d),window.removeEventListener(s,u),window.removeEventListener(r,f),n.updateParent();var e=a||n.onResizeEnd;if(e){var t=n.element.getBoundingClientRect();e(Math.floor(isHorizontal(o)?t.width:t.height),t,o)}};window.addEventListener(s,u),window.addEventListener(r,f)}}}function createDrag(z){return{startDrag:function(e,s,r,i,o,a){if(s.element){var t=o(e),n=0===s.left.adjusted.length?0:s.left.adjusted[0],p=0===s.top.adjusted.length?0:s.top.adjusted[0],c=t.x-n,l=t.y-p,u=0,h=0,d=!1,m=function(e,t){return n=-(c-e),r=-(l-t),(o=s).left.adjusted=[n],o.top.adjusted=[r],o.right.size&&(o.right.adjusted=[-n]),o.bottom.size&&(o.bottom.adjusted=[-r]),void z.updateStyles(o);var o,n,r},f=throttle(m,5),_=function(e){d=!0;var t=o(e);u=t.x,h=t.y,e.preventDefault(),f(u,h)},y=function(){var e,t;if(d&&m(u,h),window.removeEventListener(i,_),window.removeEventListener(r,y),a){var o=s.parentId&&(null===(e=z.getSpace(s.parentId))||void 0===e?void 0:e.element.getBoundingClientRect())||{left:0,top:0,right:0,bottom:0,width:0,height:0},n={left:(t=s.element.getBoundingClientRect()).left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height};a(__assign(__assign({},n),{left:n.left-o.left,top:n.top-o.top}),d)}};window.addEventListener(i,_),window.addEventListener(r,y)}}}}exports.Type=void 0,function(e){e.ViewPort="viewport",e.Fixed="fixed",e.Fill="fill",e.Positioned="positioned",e.Anchored="anchored",e.Custom="custom"}(exports.Type||(exports.Type={})),exports.AnchorType=void 0,function(e){e.Left="anchor-left",e.Right="anchor-right",e.Top="anchor-top",e.Bottom="anchor-bottom"}(exports.AnchorType||(exports.AnchorType={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(Orientation=Orientation||{}),exports.ResizeType=void 0,function(e){e.All="resize-all",e.Left="resize-left",e.Right="resize-right",e.Top="resize-top",e.Bottom="resize-bottom",e.TopLeft="resize-topleft",e.TopRight="resize-topright",e.BottomLeft="resize-bottomleft",e.BottomRight="resize-bottomright"}(exports.ResizeType||(exports.ResizeType={})),exports.ResizeHandlePlacement=void 0,function(e){e.OverlayInside="overlay-inside",e.Inside="inside",e.OverlayBoundary="overlay-boundary"}(exports.ResizeHandlePlacement||(exports.ResizeHandlePlacement={})),exports.CenterType=void 0,function(e){e.None="none",e.Vertical="vertical",e.HorizontalVertical="horizontalVertical"}(exports.CenterType||(exports.CenterType={})),function(e){e.Mouse="mousemove",e.Touch="touchmove"}(MoveEvent=MoveEvent||{}),function(e){e.Mouse="mouseup",e.Touch="touchend"}(EndEvent=EndEvent||{});var spaceDefaults={id:"",zIndex:0,scrollable:!1,resizing:!1,allowOverflow:!1,centerContent:"none",dimension:{left:0,top:0,right:0,bottom:0,width:0,height:0,x:0,y:0,toJSON:function(){return""}},handleSize:5,touchHandleSize:5,handlePlacement:exports.ResizeHandlePlacement.OverlayInside,adjustLeft:function(){return!1},adjustRight:function(){return!1},adjustTop:function(){return!1},adjustBottom:function(){return!1},adjustEdge:function(){return!1},anchoredChildren:function(){return[]}},anchorTypes=[exports.AnchorType.Left,exports.AnchorType.Top,exports.AnchorType.Right,exports.AnchorType.Bottom];function getPosition(e){return e===exports.Type.ViewPort?"fixed":e===exports.Type.Fixed?"relative":"absolute"}function getOrientation(e){return e===exports.AnchorType.Bottom||e===exports.AnchorType.Top?Orientation.Vertical:Orientation.Horizontal}function anchorUpdates(e){return[{anchor:exports.AnchorType.Left,update:e.adjustLeft},{anchor:exports.AnchorType.Top,update:e.adjustTop},{anchor:exports.AnchorType.Right,update:e.adjustRight},{anchor:exports.AnchorType.Bottom,update:e.adjustBottom}]}function sizeInfoDefault(e){return{size:e,adjusted:[],resized:0}}function createStore(){function P(t){return r().find(function(e){return e.id===t})}function S(r){for(var e,i,o=function(e,t,o){return o.indexOf(e)===t},s=(e=r.children,i=[],anchorTypes.forEach(function(t){var s=e.filter(function(e){return void 0!==e.anchor&&e.anchor===t});s.map(function(e){return e.zIndex}).filter(o).forEach(function(t){var e=s.filter(function(e){return e.zIndex===t}),o=e.filter(function(e){return void 0!==e.order}),n=e.filter(function(e){return void 0===e.order}),r=0<o.length?o.map(function(e){return e.order}).reduce(function(e,t){return Math.max(e,t)}):0;i=__spreadArray(__spreadArray([],i,!0),__spreadArray(__spreadArray([],o,!0),n.map(function(e,t){return __assign(__assign({},e),{order:r+t+1})}),!0),!0)})}),__spreadArray(__spreadArray([],i,!0),e.filter(function(e){return void 0===e.anchor}),!0)),t=function(){var o=s[a],n=!1;if(o.type===exports.Type.Fill)anchorUpdates(o).forEach(function(e){var t=[];r.anchoredChildren(s,e.anchor,o.zIndex).forEach(function(e){e.orientation===Orientation.Vertical?(e.height.size&&t.push(e.height.size),e.height.resized&&t.push(e.height.resized)):(e.width.size&&t.push(e.width.size),e.width.resized&&t.push(e.width.resized))}),e.update(t)&&(n=!0)});else if(o.type===exports.Type.Anchored){var t=[];r.anchoredChildren(s,o.anchor,o.zIndex).filter(function(e){return e.id!==o.id&&e.order<=o.order}).forEach(function(e){e.orientation===Orientation.Vertical?(e.height.size&&t.push(e.height.size),e.height.resized&&t.push(e.height.resized)):(e.width.size&&t.push(e.width.size),e.width.resized&&t.push(e.width.resized))}),o.adjustEdge(t)&&(n=!0)}n&&updateStyleDefinition(o)},a=0,n=s.length;a<n;a++)t()}var n=[],r=function(){return n},_={getSpaces:r,getSpace:P,addSpace:function(e){if(r().push(e),e.parentId){var t=P(e.parentId);t&&(t.children.push(e),S(t))}updateStyleDefinition(e)},removeSpace:function(t){var e;if(e=r().filter(function(e){return e.id!==t.id}),n=e,t.parentId){var o=P(t.parentId);o&&(o.children=o.children.filter(function(e){return e.id!==t.id}),S(o))}removeStyleDefinition(t)},updateStyles:function(e){if(e.parentId){var t=P(e.parentId);t&&S(t)}updateStyleDefinition(e)},updateSpace:function(e,t){var o=t.type,n=t.anchor,r=t.order,s=t.zIndex,i=t.scrollable,a=t.position,p=t.centerContent,c=t.minimumSize,l=t.maximumSize,u=t.handleSize,h=t.touchHandleSize,d=t.handlePlacement,m=t.allowOverflow,f=a&&a.leftResizable||!1,_=a&&a.rightResizable||!1,y=a&&a.topResizable||!1,z=a&&a.bottomResizable||!1,g=a&&a.topLeftResizable||!1,T=a&&a.topRightResizable||!1,R=a&&a.bottomLeftResizable||!1,x=a&&a.bottomRightResizable||!1,b=!1;if(e.type!==o&&(e.type=o,e.position=getPosition(o),b=!0),e.anchor!==n&&(e.anchor=n,e.orientation=getOrientation(n),b=!0,o===exports.Type.Anchored&&(n===exports.AnchorType.Left?e.adjustEdge=e.adjustLeft:n===exports.AnchorType.Top?e.adjustEdge=e.adjustTop:n===exports.AnchorType.Right?e.adjustEdge=e.adjustRight:n===exports.AnchorType.Bottom&&(e.adjustEdge=e.adjustBottom))),e.left.size!==(a&&a.left)&&(e.left.size=a&&a.left,e.left.resized=0,e.left.adjusted=[],b=!0),e.right.size!==(a&&a.right)&&(e.right.size=a&&a.right,e.right.resized=0,e.right.adjusted=[],b=!0),e.top.size!==(a&&a.top)&&(e.top.size=a&&a.top,e.top.resized=0,e.top.adjusted=[],b=!0),e.bottom.size!==(a&&a.bottom)&&(e.bottom.size=a&&a.bottom,e.bottom.resized=0,e.bottom.adjusted=[],b=!0),e.width.size!==(a&&a.width)&&(e.width.size=a&&a.width,e.width.resized=0,e.width.adjusted=[],b=!0),e.height.size!==(a&&a.height)&&(e.height.size=a&&a.height,e.height.resized=0,e.height.adjusted=[],b=!0),coalesce(e.order,0)!==coalesce(r,0)&&(e.order=coalesce(r,0),b=!0),coalesce(e.zIndex,0)!==coalesce(s,0)&&(e.zIndex=coalesce(s,0),b=!0),coalesce(e.scrollable,!1)!==coalesce(i,!1)&&(e.scrollable=coalesce(i,!1),b=!0),e.minimumSize!==c&&(e.minimumSize=c,b=!0),e.maximumSize!==l&&(e.maximumSize=l,b=!0),coalesce(e.centerContent,exports.CenterType.None)!==coalesce(p,exports.CenterType.None)&&(e.centerContent=coalesce(p,exports.CenterType.None),b=!0),e.handleSize!==u&&(e.handleSize=u||spaceDefaults.handleSize,b=!0),e.touchHandleSize!==h&&(e.touchHandleSize=h||spaceDefaults.touchHandleSize,b=!0),e.handlePlacement!==d&&(e.handlePlacement=d||spaceDefaults.handlePlacement,b=!0),e.canResizeBottom!==z&&(e.canResizeBottom=z,b=!0),e.canResizeTop!==y&&(e.canResizeTop=y,b=!0),e.canResizeLeft!==f&&(e.canResizeLeft=f,b=!0),e.canResizeRight!==_&&(e.canResizeRight=_,b=!0),e.canResizeTopLeft!==g&&(e.canResizeTopLeft=g,b=!0),e.canResizeTopRight!==T&&(e.canResizeTopRight=T,b=!0),e.canResizeBottomLeft!==R&&(e.canResizeBottomLeft=R,b=!0),e.canResizeBottomRight!==x&&(e.canResizeBottomRight=x,b=!0),e.allowOverflow!==m&&(e.allowOverflow=m||spaceDefaults.allowOverflow,b=!0),b){if(e.parentId){var v=P(e.parentId);v&&S(v)}updateStyleDefinition(e)}},createSpace:function(){return{}},startMouseResize:function(){return null},startTouchResize:function(){return null},startMouseDrag:function(){return null},startTouchDrag:function(){return null}},s=createResize(_),i=createDrag(_);return _.createSpace=function(t,e,o){var n=e.position,r=e.anchor,s=e.type,i=__rest(e,["position","anchor","type"]),a=n&&n.rightResizable||!1,p=n&&n.leftResizable||!1,c=n&&n.bottomResizable||!1,l=n&&n.topResizable||!1,u=n&&n.topLeftResizable||!1,h=n&&n.topRightResizable||!1,d=n&&n.bottomLeftResizable||!1,m=n&&n.bottomRightResizable||!1,f=__assign(__assign(__assign({},spaceDefaults),i),{store:_,update:o,updateParent:function(){if(t){var e=_.getSpace(t);e&&e.update()}},parentId:t,children:[],anchor:r,type:s,orientation:getOrientation(r),position:getPosition(s),left:sizeInfoDefault(n&&n.left),right:sizeInfoDefault(n&&n.right),top:sizeInfoDefault(n&&n.top),bottom:sizeInfoDefault(n&&n.bottom),width:sizeInfoDefault(n&&n.width),height:sizeInfoDefault(n&&n.height),canResizeLeft:a,canResizeRight:p,canResizeTop:c,canResizeBottom:l,canResizeTopLeft:u,canResizeTopRight:h,canResizeBottomLeft:d,canResizeBottomRight:m});return f.anchoredChildren=function(e,t,o){return e.filter(function(e){return e.type===exports.Type.Anchored&&e.anchor===t&&e.zIndex===o})},f.adjustLeft=function(e){return!adjustmentsEqual(f.left.adjusted,e)&&(f.left.adjusted=e,!0)},f.adjustRight=function(e){return!adjustmentsEqual(f.right.adjusted,e)&&(f.right.adjusted=e,!0)},f.adjustTop=function(e){return!adjustmentsEqual(f.top.adjusted,e)&&(f.top.adjusted=e,!0)},f.adjustBottom=function(e){return!adjustmentsEqual(f.bottom.adjusted,e)&&(f.bottom.adjusted=e,!0)},s===exports.Type.Anchored&&(r===exports.AnchorType.Left?f.adjustEdge=f.adjustLeft:r===exports.AnchorType.Top?f.adjustEdge=f.adjustTop:r===exports.AnchorType.Right?f.adjustEdge=f.adjustRight:r===exports.AnchorType.Bottom&&(f.adjustEdge=f.adjustBottom)),f},_.startMouseResize=function(e,t,o,n){s.startResize(o,e,t,EndEvent.Mouse,MoveEvent.Mouse,function(e){return{x:e.clientX,y:e.clientY}},n)},_.startTouchResize=function(e,t,o,n){s.startResize(o,e,t,EndEvent.Touch,MoveEvent.Touch,function(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}},n)},_.startMouseDrag=function(e,t,o){i.startDrag(t,e,EndEvent.Mouse,MoveEvent.Mouse,function(e){return{x:e.clientX,y:e.clientY}},o)},_.startTouchDrag=function(e,t,o){i.startDrag(t,e,EndEvent.Touch,MoveEvent.Touch,function(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}},o)},_}var useEffectOnce=function(e){var t=React.useRef(),o=React.useRef(!1),n=React.useRef(!1),r=React.useState(0);r[0];var s=r[1];o.current&&(n.current=!0),React.useEffect(function(){return o.current||(t.current=e(),o.current=!0),s(function(e){return e+1}),function(){n.current&&t.current&&t.current()}},[])},ParentContext=React__namespace.createContext(void 0),DOMRectContext=React__namespace.createContext(void 0),LayerContext=React__namespace.createContext(void 0),OptionsContext=React__namespace.createContext({}),currentStore=createStore(),commonProps={id:PropTypes__namespace.string,className:PropTypes__namespace.string,style:PropTypes__namespace.oneOfType([PropTypes__namespace.object,PropTypes__namespace.array]),as:PropTypes__namespace.any,centerContent:PropTypes__namespace.oneOf([exports.CenterType.None,exports.CenterType.Vertical,exports.CenterType.HorizontalVertical]),zIndex:PropTypes__namespace.number,scrollable:PropTypes__namespace.bool,trackSize:PropTypes__namespace.bool,allowOverflow:PropTypes__namespace.bool,handleRender:PropTypes__namespace.func,onClick:PropTypes__namespace.func,onDoubleClick:PropTypes__namespace.func,onMouseDown:PropTypes__namespace.func,onMouseEnter:PropTypes__namespace.func,onMouseLeave:PropTypes__namespace.func,onMouseMove:PropTypes__namespace.func,onTouchStart:PropTypes__namespace.func,onTouchMove:PropTypes__namespace.func,onTouchEnd:PropTypes__namespace.func};function useForceUpdate(){var e=React__namespace.useState(0)[1];return React__namespace.useCallback(function(){e(function(e){return e+1})},[])}function useUniqueId(){return SSR_SUPPORT_ENABLED&&React__namespace.version.startsWith("18")?"s"+React__namespace.useId().replace(/\:/g,""):"s"+shortuuid()}function useSpace(e){var o=currentStore,t=useForceUpdate(),n=React__namespace.useContext(ParentContext),r=React__namespace.useContext(LayerContext),s=React__namespace.useContext(OptionsContext).debug,i=useUniqueId(),a=React__namespace.useState(e.id||i)[0],p=React__namespace.useRef(),c=React__namespace.useRef(),l=React__namespace.useState(),u=l[0],h=l[1],d=o.getSpace(a);s&&console.table(o.getSpaces());var m=__assign(__assign({},e),{id:a,zIndex:coalesce(e.zIndex,r)});d?o.updateSpace(d,m):(d=o.createSpace(n,m,t),o.addSpace(d));var f=useSpaceResizeHandles(o,d);return useEffectOnce(function(){var t=p.current?p.current.getBoundingClientRect():new DOMRect;return d.dimension=__assign(__assign({},t),{left:Math.floor(t.left),top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),width:Math.floor(t.width),height:Math.floor(t.height),x:Math.floor(t.x),y:Math.floor(t.y)}),h(d.dimension),e.trackSize&&(c.current=new cssElementQueries.ResizeSensor(p.current,function(e){d.dimension=__assign(__assign({},t),{width:Math.floor(e.width),height:Math.floor(e.height)}),h(d.dimension)})),function(){c.current&&c.current.detach(),o.removeSpace(d)}}),{space:d,resizeHandles:f,domRect:u,elementRef:p}}var resizeSetup=[{id:"ml",className:"resize-left",resizeType:exports.ResizeType.Left,condition:function(e){return e.canResizeLeft}},{id:"mr",className:"resize-right",resizeType:exports.ResizeType.Right,condition:function(e){return e.canResizeRight}},{id:"mt",className:"resize-top",resizeType:exports.ResizeType.Top,condition:function(e){return e.canResizeTop}},{id:"mb",className:"resize-bottom",resizeType:exports.ResizeType.Bottom,condition:function(e){return e.canResizeBottom}},{id:"mtl",className:"resize-top-left",resizeType:exports.ResizeType.TopLeft,condition:function(e){return e.canResizeTopLeft}},{id:"mtr",className:"resize-top-right",resizeType:exports.ResizeType.TopRight,condition:function(e){return e.canResizeTopRight}},{id:"mbl",className:"resize-bottom-left",resizeType:exports.ResizeType.BottomLeft,condition:function(e){return e.canResizeBottomLeft}},{id:"mbr",className:"resize-bottom-right",resizeType:exports.ResizeType.BottomRight,condition:function(e){return e.canResizeBottomRight}}];function useSpaceResizeHandles(r,s){var i=[];return resizeSetup.forEach(function(e){var t,o,n;e.condition(s)&&(t=e.id,o=e.className,n=e.resizeType,i.push({id:s.id+"-"+t,key:t,className:"spaces-resize-handle "+o,onMouseDown:function(e){return r.startMouseResize(n,s,e)},onTouchStart:function(e){return r.startTouchResize(n,s,e)}}))}),{mouseHandles:i}}function useCurrentSpace(){var o=currentStore,e=React__namespace.useContext(ParentContext),n=e?o.getSpace(e):void 0,t=React__namespace.useContext(DOMRectContext),r=React__namespace.useContext(LayerContext),s=React__namespace.useCallback(function(e,t){return n?o.startMouseDrag(n,e,t):null},[e]),i=React__namespace.useCallback(function(e,t){return n?o.startTouchDrag(n,e,t):null},[e]),a=React__namespace.useCallback(function(){return n?o.updateStyles(n):null},[e]);return{size:__assign(__assign({},{width:0,height:0,x:0,y:0}),t),layer:r||0,startMouseDrag:s,startTouchDrag:i,forceUpdate:a}}var SSR_SUPPORT_ENABLED=!1;function enabledSsrSupport(){SSR_SUPPORT_ENABLED=!0}var Centered=function(e){return React__namespace.createElement("div",{className:"spaces-centered"},e.children)},CenteredVertically=function(e){return React__namespace.createElement("div",{className:"spaces-centered-vertically"},e.children)};function applyCentering(e,t){switch(t){case exports.CenterType.Vertical:return React__namespace.createElement(CenteredVertically,null,e);case exports.CenterType.HorizontalVertical:return React__namespace.createElement(Centered,null,e)}return e}var Space=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return React__namespace.createElement(SpaceInner,__assign({},this.props,{wrapperInstance:this}))},t}(React__namespace.Component),SpaceInner=function(e){var t,o=null!==(t=e.id)&&void 0!==t?t:e.wrapperInstance._react_spaces_uniqueid,n=React__namespace.useState(!!SSR_SUPPORT_ENABLED),r=n[0],s=n[1],i=useUniqueId();o||(e.wrapperInstance._react_spaces_uniqueid=i,o=e.wrapperInstance._react_spaces_uniqueid);var a=e.style,p=e.className,c=e.onClick,l=e.onDoubleClick,u=e.onMouseDown,h=e.onMouseEnter,d=e.onMouseLeave,m=e.onMouseMove,f=e.onTouchStart,_=e.onTouchMove,y=e.onTouchEnd,z=e.children,g=e.handleRender,T={onClick:c,onDoubleClick:l,onMouseDown:u,onMouseEnter:h,onMouseLeave:d,onMouseMove:m,onTouchStart:f,onTouchMove:_,onTouchEnd:y},R=useSpace(__assign(__assign({},e),{id:o})),x=R.space,b=R.domRect,v=R.elementRef,P=R.resizeHandles;if(SSR_SUPPORT_ENABLED&&!isServer()){var S=document.getElementById("style_"+o+"_ssr");S&&(x.ssrStyle=S.innerHTML),updateStyleDefinition(x)}useEffectOnce(function(){x.element=v.current,SSR_SUPPORT_ENABLED&&r&&s(!1)});var w=p?p.split(" ").map(function(e){return e.trim()}):[],E=__spreadArray(__spreadArray(__spreadArray(__spreadArray([],["spaces-space",x.children.find(function(e){return e.resizing})?"spaces-resizing":void 0],!1),[x.type===exports.Type.Fixed?"spaces-fixedsize-layout":void 0],!1),[x.type===exports.Type.ViewPort?"spaces-fullpage-layout":void 0],!1),w.map(function(e){return e+"-container"}),!0).filter(function(e){return e}),A=__spreadArray(__spreadArray([],["spaces-space-inner"],!1),w,!0),j=a;x.handlePlacement===exports.ResizeHandlePlacement.Inside&&(j=__assign(__assign({},a),{left:x.anchor===exports.AnchorType.Right?x.handleSize:void 0,right:x.anchor===exports.AnchorType.Left?x.handleSize:void 0,top:x.anchor===exports.AnchorType.Bottom?x.handleSize:void 0,bottom:x.anchor===exports.AnchorType.Top?x.handleSize:void 0}));var O=applyCentering(z,e.centerContent),L=__assign({id:x.id,ref:v,className:E.join(" ")},T);return React__namespace.createElement(React__namespace.Fragment,null,P.mouseHandles.map(function(e){return(null==g?void 0:g(e))||React__namespace.createElement("div",__assign({},e))}),SSR_SUPPORT_ENABLED&&x.ssrStyle&&r&&React__namespace.createElement("style",{id:"style_"+x.id+"_ssr"},x.ssrStyle),React__namespace.createElement(e.as||"div",L,React__namespace.createElement("div",{className:A.join(" "),style:j},React__namespace.createElement(ParentContext.Provider,{value:x.id},React__namespace.createElement(LayerContext.Provider,{value:void 0},React__namespace.createElement(DOMRectContext.Provider,{value:b},O))))))},resizableProps=__assign(__assign({},commonProps),{size:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]).isRequired,order:PropTypes__namespace.number,handleSize:PropTypes__namespace.number,touchHandleSize:PropTypes__namespace.number,handlePlacement:PropTypes__namespace.oneOf([exports.ResizeHandlePlacement.Inside,exports.ResizeHandlePlacement.OverlayBoundary,exports.ResizeHandlePlacement.OverlayInside]),handleRender:PropTypes__namespace.func,minimumSize:PropTypes__namespace.number,maximumSize:PropTypes__namespace.number,onResizeStart:PropTypes__namespace.func,onResizeEnd:PropTypes__namespace.func}),anchoredProps=__assign(__assign({},resizableProps),{resizable:PropTypes__namespace.bool}),LeftResizable=function(e){var t=e.children,o=e.size,n=__rest(e,["children","size"]);return React__namespace.createElement(Space,__assign({},n,{type:exports.Type.Anchored,anchor:exports.AnchorType.Left,position:{left:0,top:0,bottom:0,rightResizable:!0,width:o}}),t)};LeftResizable.propTypes=resizableProps;var Left=function(e){var t=e.size,o=e.children,n=e.resizable,r=__rest(e,["size","children","resizable"]);return React__namespace.createElement(Space,__assign({},r,{type:exports.Type.Anchored,anchor:exports.AnchorType.Left,position:{left:0,top:0,bottom:0,rightResizable:n,width:t}}),o)};Left.propTypes=anchoredProps;var TopResizable=function(e){var t=e.children,o=e.size,n=__rest(e,["children","size"]);return React__namespace.createElement(Space,__assign({},n,{type:exports.Type.Anchored,anchor:exports.AnchorType.Top,position:{left:0,top:0,right:0,bottomResizable:!0,height:o}}),t)};TopResizable.propTypes=resizableProps;var Top=function(e){var t=e.size,o=e.children,n=e.resizable,r=__rest(e,["size","children","resizable"]);return React__namespace.createElement(Space,__assign({},r,{type:exports.Type.Anchored,anchor:exports.AnchorType.Top,position:{left:0,top:0,right:0,bottomResizable:n,height:t}}),o)};Top.propTypes=anchoredProps;var RightResizable=function(e){var t=e.children,o=e.size,n=__rest(e,["children","size"]);return React__namespace.createElement(Space,__assign({},n,{type:exports.Type.Anchored,anchor:exports.AnchorType.Right,position:{bottom:0,top:0,right:0,leftResizable:!0,width:o}}),t)};RightResizable.propTypes=resizableProps;var Right=function(e){var t=e.size,o=e.children,n=e.resizable,r=__rest(e,["size","children","resizable"]);return React__namespace.createElement(Space,__assign({},r,{type:exports.Type.Anchored,anchor:exports.AnchorType.Right,position:{bottom:0,top:0,right:0,leftResizable:n,width:t}}),o)};Right.propTypes=anchoredProps;var BottomResizable=function(e){var t=e.children,o=e.size,n=__rest(e,["children","size"]);return React__namespace.createElement(Space,__assign({},n,{type:exports.Type.Anchored,anchor:exports.AnchorType.Bottom,position:{bottom:0,left:0,right:0,topResizable:!0,height:o}}),t)};BottomResizable.propTypes=resizableProps;var Bottom=function(e){var t=e.size,o=e.children,n=e.resizable,r=__rest(e,["size","children","resizable"]);return React__namespace.createElement(Space,__assign({},r,{type:exports.Type.Anchored,anchor:exports.AnchorType.Bottom,position:{bottom:0,left:0,right:0,topResizable:n,height:t}}),o)};Bottom.propTypes=anchoredProps;var customProps=omit(__assign(__assign({},anchoredProps),{type:PropTypes__namespace.oneOf([exports.Type.Positioned,exports.Type.Fill,exports.Type.Anchored]),anchor:PropTypes__namespace.oneOf([exports.AnchorType.Left,exports.AnchorType.Top,exports.AnchorType.Right,exports.AnchorType.Bottom]),anchorSize:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),left:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),top:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),right:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),bottom:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),width:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),height:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),resizeTypes:PropTypes__namespace.array}),"size"),Custom=function(e){var t,o=e.children,n=e.type,r=e.left,s=e.top,i=e.right,a=e.bottom,p=e.width,c=e.height,l=e.anchorSize,u=e.anchor,h=e.resizable,d=e.resizeTypes,m=__rest(e,["children","type","left","top","right","bottom","width","height","anchorSize","anchor","resizable","resizeTypes"]);return(n=n||exports.Type.Fill)===exports.Type.Positioned?t={left:r,top:s,right:i,bottom:a,width:p,height:c,leftResizable:d&&(d.includes(exports.ResizeType.Left)||d.includes(exports.ResizeType.All)),topResizable:d&&(d.includes(exports.ResizeType.Top)||d.includes(exports.ResizeType.All)),rightResizable:d&&(d.includes(exports.ResizeType.Right)||d.includes(exports.ResizeType.All)),bottomResizable:d&&(d.includes(exports.ResizeType.Bottom)||d.includes(exports.ResizeType.All)),topLeftResizable:d&&(d.includes(exports.ResizeType.TopLeft)||d.includes(exports.ResizeType.All)),topRightResizable:d&&(d.includes(exports.ResizeType.TopRight)||d.includes(exports.ResizeType.All)),bottomLeftResizable:d&&(d.includes(exports.ResizeType.BottomLeft)||d.includes(exports.ResizeType.All)),bottomRightResizable:d&&(d.includes(exports.ResizeType.BottomRight)||d.includes(exports.ResizeType.All))}:n=u===exports.AnchorType.Left?(t={left:0,top:0,bottom:0,width:l,rightResizable:h},exports.Type.Anchored):u===exports.AnchorType.Right?(t={right:0,top:0,bottom:0,width:l,leftResizable:h},exports.Type.Anchored):u===exports.AnchorType.Top?(t={left:0,top:0,right:0,height:l,bottomResizable:h},exports.Type.Anchored):u===exports.AnchorType.Bottom?(t={left:0,bottom:0,right:0,height:l,topResizable:h},exports.Type.Anchored):(t={left:0,top:0,bottom:0,right:0},exports.Type.Fill),React__namespace.createElement(Space,__assign({},m,{type:n,anchor:u,position:t}),o)};Custom.propTypes=customProps;var Fill=function(e){return React__namespace.createElement(Space,__assign({},e,{type:exports.Type.Fill,position:{left:0,top:0,right:0,bottom:0}}),e.children)};Fill.propTypes=commonProps;var Fixed=function(e){var t=e.width,o=e.height,n=e.children,r=__rest(e,["width","height","children"]);return React__namespace.createElement(Space,__assign({},r,{type:exports.Type.Fixed,position:{width:t,height:o}}),n)};Fixed.propTypes=__assign(__assign({},commonProps),{width:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),height:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]).isRequired});var Layer=function(e){return React__namespace.createElement(LayerContext.Provider,{value:e.zIndex},e.children)};Layer.propTypes={zIndex:PropTypes__namespace.number.isRequired};var Positioned=function(e){var t=e.left,o=e.top,n=e.right,r=e.bottom,s=e.width,i=e.height,a=e.resizable,p=__rest(e,["left","top","right","bottom","width","height","resizable"]),c=a||[];return React__namespace.createElement(Space,__assign({},p,{type:exports.Type.Positioned,position:{left:t,top:o,right:n,bottom:r,leftResizable:c.includes(exports.ResizeType.Left)||c.includes(exports.ResizeType.All),topResizable:c.includes(exports.ResizeType.Top)||c.includes(exports.ResizeType.All),rightResizable:c.includes(exports.ResizeType.Right)||c.includes(exports.ResizeType.All),bottomResizable:c.includes(exports.ResizeType.Bottom)||c.includes(exports.ResizeType.All),topLeftResizable:c.includes(exports.ResizeType.TopLeft)||c.includes(exports.ResizeType.All),topRightResizable:c.includes(exports.ResizeType.TopRight)||c.includes(exports.ResizeType.All),bottomLeftResizable:c.includes(exports.ResizeType.BottomLeft)||c.includes(exports.ResizeType.All),bottomRightResizable:c.includes(exports.ResizeType.BottomRight)||c.includes(exports.ResizeType.All),width:s,height:i}}),p.children)};Positioned.propTypes=__assign(__assign({},commonProps),{left:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),top:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),right:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),bottom:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),width:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),height:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),resizable:PropTypes__namespace.array});var Info=function(e){var t=React__namespace.useContext(DOMRectContext);return t?e.children(t):e.children({left:0,top:0,right:0,bottom:0,width:0,height:0,x:0,y:0,toJSON:function(){return""}})},ViewPort=function(e){var t=e.left,o=e.top,n=e.right,r=e.bottom,s=e.children,i=__rest(e,["left","top","right","bottom","children"]);return React__namespace.createElement(Space,__assign({},i,{type:exports.Type.ViewPort,position:{left:t||0,top:o||0,right:n||0,bottom:r||0}}),s)};ViewPort.propTypes=__assign(__assign({},commonProps),{left:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),top:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),right:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number]),bottom:PropTypes__namespace.oneOfType([PropTypes__namespace.string,PropTypes__namespace.number])});var SSR=function(e){var t=e.children;return enabledSsrSupport(),React__namespace.createElement(React__namespace.Fragment,null,React__namespace.createElement("style",{dangerouslySetInnerHTML:{__html:css$1}}),t)},Options=function(e){var t=e.children,o=__rest(e,["children"]);return React__namespace.createElement(OptionsContext.Provider,{value:o},t)};exports.Bottom=Bottom,exports.BottomResizable=BottomResizable,exports.Centered=Centered,exports.CenteredVertically=CenteredVertically,exports.Custom=Custom,exports.Fill=Fill,exports.Fixed=Fixed,exports.Info=Info,exports.Layer=Layer,exports.Left=Left,exports.LeftResizable=LeftResizable,exports.Options=Options,exports.Positioned=Positioned,exports.Right=Right,exports.RightResizable=RightResizable,exports.SSR=SSR,exports.Top=Top,exports.TopResizable=TopResizable,exports.ViewPort=ViewPort,exports.anchoredProps=anchoredProps,exports.enabledSsrSupport=enabledSsrSupport,exports.resizableProps=resizableProps,exports.useCurrentSpace=useCurrentSpace;
//# sourceMappingURL=server.js.map
